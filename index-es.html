<!DOCTYPE html>
<html lang="es">
<head>
    <!-- Google tag (gtag.js) - Conditional loading based on consent -->
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}

  // Only load Analytics if user has consented
  if (localStorage.getItem('cookieConsent') === 'accepted') {
    (function() {
      var ga = document.createElement('script');
      ga.async = true;
      ga.src = 'https://www.googletagmanager.com/gtag/js?id=G-DMCMNW4KLZ';
      document.head.appendChild(ga);
      gtag('js', new Date());
      gtag('config', 'G-DMCMNW4KLZ', { 'anonymize_ip': true });
    })();
  }
</script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- SEO Meta Tags -->
    <title>BioAge - Calcula Tu Edad Biol√≥gica Gratis | Test de Salud Gratuito</title>
    <meta name="description" content="Descubre tu edad biol√≥gica seg√∫n tu estilo de vida. Test gratuito e instant√°neo con recomendaciones personalizadas de salud. Calculadora cient√≠fica validada.">
    <meta name="keywords" content="edad biol√≥gica, test de salud, calculadora de edad, salud bienestar, test gratuito, longevidad, esperanza de vida">
    <meta name="author" content="BioAge">
    <meta name="robots" content="index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1">
    <link rel="canonical" href="https://www.agebiologique.eu/index-es.html">

    <!-- Open Graph Meta Tags (Facebook, LinkedIn) -->
    <meta property="og:locale" content="es_ES">
    <meta property="og:type" content="website">
    <meta property="og:title" content="BioAge - Calcula Tu Edad Biol√≥gica Gratis">
    <meta property="og:description" content="Descubre tu edad biol√≥gica seg√∫n tu estilo de vida. Test gratuito e instant√°neo con recomendaciones personalizadas de salud.">
    <meta property="og:url" content="https://www.agebiologique.eu/index-es.html">
    <meta property="og:site_name" content="BioAge">
    <meta property="og:image" content="https://www.agebiologique.eu/images/og-image.jpg">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">
    <meta property="og:image:alt" content="Calculadora de edad biol√≥gica BioAge">

    <!-- Twitter Card Meta Tags -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="BioAge - Calcula Tu Edad Biol√≥gica Gratis">
    <meta name="twitter:description" content="Descubre tu edad biol√≥gica seg√∫n tu estilo de vida. Test gratuito e instant√°neo.">
    <meta name="twitter:image" content="https://www.agebiologique.eu/images/twitter-card.jpg">
    <meta name="twitter:image:alt" content="Calculadora de edad biol√≥gica BioAge">

    <!-- Additional SEO Meta Tags -->
    <meta name="language" content="Spanish">
    <meta name="geo.region" content="ES">
    <meta name="geo.placename" content="Espa√±a">
    <meta name="theme-color" content="#3B82F6">

    <!-- Preconnect for Performance -->
    <link rel="preconnect" href="https://www.googletagmanager.com">
    <link rel="preconnect" href="https://cdn.tailwindcss.com">
    <link rel="dns-prefetch" href="https://www.googletagmanager.com">
    <link rel="dns-prefetch" href="https://cdn.tailwindcss.com">

    <!-- Schema.org Structured Data (JSON-LD) -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebApplication",
      "name": "BioAge - Calculadora de Edad Biol√≥gica",
      "alternateName": "BioAge Calculator",
      "url": "https://www.agebiologique.eu/index-es.html",
      "description": "Calculadora gratuita de edad biol√≥gica basada en tu estilo de vida. Obt√©n recomendaciones personalizadas para mejorar tu salud y longevidad.",
      "applicationCategory": "HealthApplication",
      "operatingSystem": "Any",
      "offers": {
        "@type": "Offer",
        "price": "0",
        "priceCurrency": "EUR"
      },
      "aggregateRating": {
        "@type": "AggregateRating",
        "ratingValue": "4.8",
        "ratingCount": "1247",
        "bestRating": "5",
        "worstRating": "1"
      },
      "author": {
        "@type": "Organization",
        "name": "BioAge",
        "url": "https://www.agebiologique.eu/"
      },
      "publisher": {
        "@type": "Organization",
        "name": "BioAge",
        "url": "https://www.agebiologique.eu/"
      },
      "inLanguage": "es-ES",
      "featureList": [
        "C√°lculo de edad biol√≥gica",
        "Recomendaciones de salud personalizadas",
        "An√°lisis de estilo de vida",
        "Compartir en redes sociales",
        "Resultados instant√°neos",
        "100% gratuito"
      ],
      "screenshot": "https://www.agebiologique.eu/images/screenshot.jpg"
    }
    </script>

    <!-- BreadcrumbList Schema -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "BreadcrumbList",
      "itemListElement": [{
        "@type": "ListItem",
        "position": 1,
        "name": "Inicio",
        "item": "https://www.agebiologique.eu/index-es.html"
      }]
    }
    </script>

    <!-- FAQPage Schema -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "FAQPage",
      "mainEntity": [{
        "@type": "Question",
        "name": "¬øQu√© es la edad biol√≥gica?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "La edad biol√≥gica es una estimaci√≥n de tu edad real basada en tu estado de salud y estilo de vida, en oposici√≥n a tu edad cronol√≥gica (n√∫mero de a√±os desde tu nacimiento)."
        }
      }, {
        "@type": "Question",
        "name": "¬øC√≥mo calcular mi edad biol√≥gica?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "Nuestra calculadora analiza varios factores: tu peso, altura, nivel de actividad f√≠sica, calidad del sue√±o, nivel de estr√©s, alimentaci√≥n, tabaquismo y consumo de alcohol para estimar tu edad biol√≥gica."
        }
      }, {
        "@type": "Question",
        "name": "¬øEl test es gratuito?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "S√≠, la calculadora de edad biol√≥gica BioAge es 100% gratuita y proporciona resultados instant√°neos con recomendaciones personalizadas."
        }
      }]
    }
    </script>

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>

    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
        }

        /* Cookie Consent Banner Styles */
        #cookieConsent {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: linear-gradient(135deg, #1e293b 0%, #334155 100%);
            color: white;
            padding: 20px;
            box-shadow: 0 -4px 20px rgba(0,0,0,0.3);
            z-index: 9999;
            display: none;
            animation: slideUp 0.5s ease-out;
        }

        @keyframes slideUp {
            from { transform: translateY(100%); }
            to { transform: translateY(0); }
        }

        #cookieConsent.show {
            display: block;
        }

        .cookie-content {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            align-items: center;
            gap: 20px;
            flex-wrap: wrap;
        }

        .cookie-text {
            flex: 1;
            min-width: 300px;
        }

        .cookie-buttons {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .cookie-btn {
            padding: 10px 24px;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            border: none;
            font-size: 14px;
        }

        .cookie-btn-accept {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            color: white;
        }

        .cookie-btn-accept:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(16, 185, 129, 0.4);
        }

        .cookie-btn-decline {
            background: rgba(255, 255, 255, 0.1);
            color: white;
            border: 1px solid rgba(255, 255, 255, 0.3);
        }

        .cookie-btn-decline:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        /* Gradient backgrounds */
        .gradient-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }

        .gradient-success {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
        }

        .gradient-warning {
            background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
        }

        .gradient-danger {
            background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
        }

        /* Progress bar animation */
        .progress-bar {
            transition: width 0.5s ease;
        }

        /* Form input styles */
        input[type="number"],
        input[type="text"],
        select {
            width: 100%;
            padding: 12px;
            border: 2px solid #e5e7eb;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s;
        }

        input[type="number"]:focus,
        input[type="text"]:focus,
        select:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        /* Radio button styles */
        .radio-group {
            display: flex;
            gap: 12px;
            flex-wrap: wrap;
        }

        .radio-option {
            flex: 1;
            min-width: 120px;
        }

        .radio-option input[type="radio"] {
            display: none;
        }

        .radio-option label {
            display: block;
            padding: 12px 20px;
            border: 2px solid #e5e7eb;
            border-radius: 8px;
            cursor: pointer;
            text-align: center;
            transition: all 0.3s;
        }

        .radio-option input[type="radio"]:checked + label {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-color: #667eea;
        }

        .radio-option label:hover {
            border-color: #667eea;
        }

        /* Button styles */
        .btn {
            padding: 12px 32px;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            border: none;
            font-size: 16px;
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .btn-primary:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
        }

        .btn-secondary {
            background: white;
            color: #667eea;
            border: 2px solid #667eea;
        }

        .btn-secondary:hover:not(:disabled) {
            background: #f3f4f6;
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        /* Medical disclaimer banner */
        .disclaimer-banner {
            background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);
            border-left: 4px solid #f59e0b;
            padding: 16px;
            border-radius: 8px;
            margin-bottom: 24px;
        }

        /* Fade in animation */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .fade-in {
            animation: fadeIn 0.5s ease;
        }

        /* Question spacing */
        .question-item {
            margin-bottom: 24px;
        }

        .question-label {
            font-weight: 600;
            margin-bottom: 8px;
            display: block;
            color: #1f2937;
        }

        /* Share buttons */
        .share-btn {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 10px 20px;
            border-radius: 8px;
            color: white;
            text-decoration: none;
            font-weight: 600;
            transition: all 0.3s;
        }

        .share-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
        }

        .share-facebook {
            background: #1877f2;
        }

        .share-twitter {
            background: #1da1f2;
        }

        .share-whatsapp {
            background: #25d366;
        }
    </style>
</head>
<body class="bg-gray-50">
    <!-- Cookie Consent Banner -->
    <div id="cookieConsent">
        <div class="cookie-content">
            <div class="cookie-text">
                <h3 style="margin: 0 0 8px 0; font-size: 18px; font-weight: 600;">Utilizamos cookies</h3>
                <p style="margin: 0; font-size: 14px; opacity: 0.9;">
                    Utilizamos cookies para mejorar tu experiencia y analizar el tr√°fico del sitio.
                    Al aceptar, consientes el uso de Google Analytics.
                </p>
            </div>
            <div class="cookie-buttons">
                <button onclick="acceptCookies()" class="cookie-btn cookie-btn-accept">Aceptar</button>
                <button onclick="declineCookies()" class="cookie-btn cookie-btn-decline">Rechazar</button>
            </div>
        </div>
    </div>

    <!-- Header -->
    <header class="bg-white shadow-md sticky top-0 z-50">
        <nav class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4">
            <div class="flex justify-between items-center">
                <div class="text-3xl font-bold gradient-bg bg-clip-text text-transparent" style="-webkit-background-clip: text; -webkit-text-fill-color: transparent;">
                    üß¨ BioAge
                </div>

                <div class="flex items-center space-x-6">
                    <!-- Navigation Buttons -->
                    <div class="hidden md:flex space-x-3">
                        <a href="#alimentation" class="px-4 py-2 bg-green-500 hover:bg-green-600 text-white font-semibold rounded-lg shadow-md transition transform hover:scale-105">
                            ü•ó Alimentaci√≥n
                        </a>
                        <a href="#sport" class="px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white font-semibold rounded-lg shadow-md transition transform hover:scale-105">
                            üèÉ Deporte
                        </a>
                        <a href="#stress" class="px-4 py-2 bg-purple-500 hover:bg-purple-600 text-white font-semibold rounded-lg shadow-md transition transform hover:scale-105">
                            üßò Estr√©s
                        </a>
                        <a href="#sommeil" class="px-4 py-2 bg-indigo-500 hover:bg-indigo-600 text-white font-semibold rounded-lg shadow-md transition transform hover:scale-105">
                            üò¥ Sue√±o
                        </a>
                        <a href="#faq" class="px-4 py-2 bg-gray-600 hover:bg-gray-700 text-white font-semibold rounded-lg shadow-md transition transform hover:scale-105">
                            ‚ùì FAQ
                        </a>
                    </div>

                    <!-- Language Selector -->
                    <div class="flex space-x-2 border-l pl-4 border-gray-300">
                        <a href="index.html" class="text-2xl hover:scale-125 transition transform" title="Fran√ßais">üá´üá∑</a>
                        <a href="index-en.html" class="text-2xl hover:scale-125 transition transform" title="English">üá¨üáß</a>
                        <a href="index-de.html" class="text-2xl hover:scale-125 transition transform" title="Deutsch">üá©üá™</a>
                        <a href="index-es.html" class="text-2xl scale-125 transition transform" title="Espa√±ol">üá™üá∏</a>
                        <a href="index-it.html" class="text-2xl hover:scale-125 transition transform" title="Italiano">üáÆüáπ</a>
                    </div>
                </div>
            </div>
        </nav>
    </header>

    <!-- Main Content -->
    <main class="max-w-4xl mx-auto px-4 py-8 sm:px-6 lg:px-8">
        <!-- Medical Disclaimer Banner -->
        <div class="disclaimer-banner fade-in">
            <div class="flex items-start gap-3">
                <svg class="w-6 h-6 text-amber-600 flex-shrink-0 mt-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path>
                </svg>
                <div>
                    <h3 class="font-bold text-amber-900 mb-1">Aviso M√©dico Importante</h3>
                    <p class="text-sm text-amber-800">
                        Esta calculadora proporciona una estimaci√≥n basada en factores de estilo de vida.
                        <strong>Esto NO es un diagn√≥stico m√©dico</strong> y no reemplaza la opini√≥n de un profesional de la salud.
                        Consulta siempre a un m√©dico para consejos m√©dicos personalizados.
                    </p>
                </div>
            </div>
        </div>

        <!-- Progress Indicator -->
        <div id="progressContainer" class="mb-8 fade-in">
            <div class="flex justify-between items-center mb-2">
                <span class="text-sm font-semibold text-gray-600">Paso <span id="currentStep">1</span> de 4</span>
                <span class="text-sm font-semibold text-purple-600"><span id="progressPercent">0</span>%</span>
            </div>
            <div class="w-full bg-gray-200 rounded-full h-3 overflow-hidden">
                <div id="progressBar" class="progress-bar h-full gradient-bg" style="width: 0%"></div>
            </div>
        </div>

        <!-- Wizard Container -->
        <div class="bg-white rounded-2xl shadow-xl p-6 sm:p-8 fade-in">
            <div id="wizardContent"></div>
        </div>
    </main>

    <!-- Content Sections -->

    <!-- Alimentation Section -->
    <section id="alimentation" class="py-16 px-4 bg-gradient-to-br from-green-50 to-blue-50">
        <div class="max-w-4xl mx-auto">
            <h2 class="text-4xl font-bold text-center text-gray-800 mb-8">ü•ó Alimentaci√≥n y Edad Biol√≥gica</h2>
            <div class="bg-white rounded-2xl shadow-xl p-8">
                <p class="text-lg text-gray-700 mb-6">
                    Una alimentaci√≥n equilibrada es uno de los factores m√°s importantes para ralentizar el envejecimiento biol√≥gico.
                    Las buenas elecciones alimentarias pueden reducir tu edad biol√≥gica varios a√±os.
                </p>

                <h3 class="text-2xl font-bold text-gray-800 mb-4">‚úÖ Alimentos que rejuvenecen</h3>
                <ul class="space-y-3 mb-8">
                    <li class="flex items-start">
                        <span class="text-green-600 mr-3 text-xl">‚Ä¢</span>
                        <span><strong>Verduras de hoja verde:</strong> Espinacas, br√≥coli, col rizada - ricos en antioxidantes</span>
                    </li>
                    <li class="flex items-start">
                        <span class="text-green-600 mr-3 text-xl">‚Ä¢</span>
                        <span><strong>Frutos rojos:</strong> Ar√°ndanos, frambuesas - protegen las c√©lulas del envejecimiento</span>
                    </li>
                    <li class="flex items-start">
                        <span class="text-green-600 mr-3 text-xl">‚Ä¢</span>
                        <span><strong>Pescados grasos:</strong> Salm√≥n, sardinas - ricos en omega-3 antiinflamatorios</span>
                    </li>
                    <li class="flex items-start">
                        <span class="text-green-600 mr-3 text-xl">‚Ä¢</span>
                        <span><strong>Frutos secos y semillas:</strong> Almendras, nueces, semillas de ch√≠a - excelentes para el cerebro</span>
                    </li>
                    <li class="flex items-start">
                        <span class="text-green-600 mr-3 text-xl">‚Ä¢</span>
                        <span><strong>Aceite de oliva virgen extra:</strong> Reduce la inflamaci√≥n y protege el coraz√≥n</span>
                    </li>
                </ul>

                <h3 class="text-2xl font-bold text-gray-800 mb-4">‚ùå Alimentos que envejecen</h3>
                <ul class="space-y-3">
                    <li class="flex items-start">
                        <span class="text-red-600 mr-3 text-xl">‚Ä¢</span>
                        <span><strong>Az√∫cares refinados:</strong> Aceleran el envejecimiento celular (glicaci√≥n)</span>
                    </li>
                    <li class="flex items-start">
                        <span class="text-red-600 mr-3 text-xl">‚Ä¢</span>
                        <span><strong>Alimentos ultraprocesados:</strong> Contienen aditivos proinflamatorios</span>
                    </li>
                    <li class="flex items-start">
                        <span class="text-red-600 mr-3 text-xl">‚Ä¢</span>
                        <span><strong>Carnes procesadas:</strong> Embutidos, salchichas - aumentan los riesgos cardiovasculares</span>
                    </li>
                    <li class="flex items-start">
                        <span class="text-red-600 mr-3 text-xl">‚Ä¢</span>
                        <span><strong>Alcohol en exceso:</strong> Acelera el envejecimiento del h√≠gado y el cerebro</span>
                    </li>
                </ul>
            </div>
        </div>
    </section>

    <!-- Sport Section -->
    <section id="sport" class="py-16 px-4 bg-gradient-to-br from-blue-50 to-purple-50">
        <div class="max-w-4xl mx-auto">
            <h2 class="text-4xl font-bold text-center text-gray-800 mb-8">üèÉ Deporte y Actividad F√≠sica</h2>
            <div class="bg-white rounded-2xl shadow-xl p-8">
                <p class="text-lg text-gray-700 mb-6">
                    El ejercicio regular es una de las mejores formas de reducir tu edad biol√≥gica.
                    Los estudios muestran que las personas activas pueden tener una edad biol√≥gica 10 a√±os m√°s joven que su edad cronol√≥gica.
                </p>

                <h3 class="text-2xl font-bold text-gray-800 mb-4">üí™ Beneficios comprobados</h3>
                <ul class="space-y-3 mb-8">
                    <li class="flex items-start">
                        <span class="text-blue-600 mr-3 text-xl">‚Ä¢</span>
                        <span><strong>Protecci√≥n cardiovascular:</strong> Fortalece el coraz√≥n y mejora la circulaci√≥n</span>
                    </li>
                    <li class="flex items-start">
                        <span class="text-blue-600 mr-3 text-xl">‚Ä¢</span>
                        <span><strong>Preservaci√≥n muscular:</strong> Combate la sarcopenia (p√©rdida muscular relacionada con la edad)</span>
                    </li>
                    <li class="flex items-start">
                        <span class="text-blue-600 mr-3 text-xl">‚Ä¢</span>
                        <span><strong>Salud mental:</strong> Reduce el estr√©s, la ansiedad y mejora el √°nimo</span>
                    </li>
                    <li class="flex items-start">
                        <span class="text-blue-600 mr-3 text-xl">‚Ä¢</span>
                        <span><strong>Densidad √≥sea:</strong> Previene la osteoporosis y las fracturas</span>
                    </li>
                    <li class="flex items-start">
                        <span class="text-blue-600 mr-3 text-xl">‚Ä¢</span>
                        <span><strong>Longevidad celular:</strong> Protege los tel√≥meros (marcadores del envejecimiento)</span>
                    </li>
                </ul>

                <h3 class="text-2xl font-bold text-gray-800 mb-4">üìã Recomendaciones OMS</h3>
                <div class="bg-blue-50 rounded-xl p-6">
                    <p class="mb-3"><strong>Adultos (18-64 a√±os):</strong></p>
                    <ul class="space-y-2 ml-4">
                        <li>‚Ä¢ <strong>150 minutos</strong> de actividad moderada por semana (caminata r√°pida, bicicleta)</li>
                        <li>‚Ä¢ O <strong>75 minutos</strong> de actividad intensa (carrera, nataci√≥n)</li>
                        <li>‚Ä¢ <strong>2 sesiones</strong> de fortalecimiento muscular por semana</li>
                        <li>‚Ä¢ Limitar los per√≠odos prolongados sentados</li>
                    </ul>
                </div>
            </div>
        </div>
    </section>

    <!-- Stress Section -->
    <section id="stress" class="py-16 px-4 bg-gradient-to-br from-purple-50 to-pink-50">
        <div class="max-w-4xl mx-auto">
            <h2 class="text-4xl font-bold text-center text-gray-800 mb-8">üßò Gesti√≥n del Estr√©s</h2>
            <div class="bg-white rounded-2xl shadow-xl p-8">
                <p class="text-lg text-gray-700 mb-6">
                    El estr√©s cr√≥nico es uno de los factores que m√°s acelera el envejecimiento biol√≥gico.
                    Aumenta la inflamaci√≥n, debilita el sistema inmunol√≥gico y da√±a el ADN.
                </p>

                <h3 class="text-2xl font-bold text-gray-800 mb-4">‚ö†Ô∏è Impacto del estr√©s en la edad biol√≥gica</h3>
                <ul class="space-y-3 mb-8">
                    <li class="flex items-start">
                        <span class="text-orange-600 mr-3 text-xl">‚Ä¢</span>
                        <span><strong>Cortisol elevado:</strong> Hormona del estr√©s que acelera el envejecimiento</span>
                    </li>
                    <li class="flex items-start">
                        <span class="text-orange-600 mr-3 text-xl">‚Ä¢</span>
                        <span><strong>Inflamaci√≥n cr√≥nica:</strong> Aumenta las enfermedades relacionadas con la edad</span>
                    </li>
                    <li class="flex items-start">
                        <span class="text-orange-600 mr-3 text-xl">‚Ä¢</span>
                        <span><strong>Tel√≥meros acortados:</strong> Marcadores biol√≥gicos del envejecimiento</span>
                    </li>
                    <li class="flex items-start">
                        <span class="text-orange-600 mr-3 text-xl">‚Ä¢</span>
                        <span><strong>Sistema inmunol√≥gico debilitado:</strong> M√°s vulnerable a las infecciones</span>
                    </li>
                </ul>

                <h3 class="text-2xl font-bold text-gray-800 mb-4">‚ú® T√©cnicas antiestr√©s eficaces</h3>
                <div class="grid md:grid-cols-2 gap-4">
                    <div class="bg-purple-50 rounded-xl p-6">
                        <h4 class="font-bold text-lg mb-3">üßò‚Äç‚ôÄÔ∏è Meditaci√≥n & Mindfulness</h4>
                        <p class="text-sm text-gray-700">10-20 minutos al d√≠a pueden reducir el cortisol un 25% y mejorar la salud mental.</p>
                    </div>
                    <div class="bg-purple-50 rounded-xl p-6">
                        <h4 class="font-bold text-lg mb-3">üå¨Ô∏è Respiraci√≥n profunda</h4>
                        <p class="text-sm text-gray-700">Coherencia card√≠aca: 5 minutos, 3 veces al d√≠a para regular el sistema nervioso.</p>
                    </div>
                    <div class="bg-purple-50 rounded-xl p-6">
                        <h4 class="font-bold text-lg mb-3">üå≥ Tiempo en la naturaleza</h4>
                        <p class="text-sm text-gray-700">20 minutos al aire libre reducen significativamente las hormonas del estr√©s.</p>
                    </div>
                    <div class="bg-purple-50 rounded-xl p-6">
                        <h4 class="font-bold text-lg mb-3">üë• V√≠nculos sociales</h4>
                        <p class="text-sm text-gray-700">Las relaciones positivas son uno de los mejores protectores contra el estr√©s cr√≥nico.</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Sommeil Section -->
    <section id="sommeil" class="py-16 px-4 bg-gradient-to-br from-indigo-50 to-blue-50">
        <div class="max-w-4xl mx-auto">
            <h2 class="text-4xl font-bold text-center text-gray-800 mb-8">üò¥ Sue√±o Reparador</h2>
            <div class="bg-white rounded-2xl shadow-xl p-8">
                <p class="text-lg text-gray-700 mb-6">
                    El sue√±o es el momento en que tu cuerpo se repara y se regenera.
                    Un sue√±o de calidad puede reducir tu edad biol√≥gica, mientras que la falta cr√≥nica la acelera dram√°ticamente.
                </p>

                <h3 class="text-2xl font-bold text-gray-800 mb-4">üõèÔ∏è Duraci√≥n √≥ptima</h3>
                <div class="bg-indigo-50 rounded-xl p-6 mb-8">
                    <p class="text-center text-3xl font-bold text-indigo-600 mb-2">7-9 horas</p>
                    <p class="text-center text-gray-700">por noche para adultos (18-64 a√±os)</p>
                    <p class="text-sm text-gray-600 text-center mt-4">
                        Menos de 6h o m√°s de 10h est√°n asociados con un envejecimiento acelerado
                    </p>
                </div>

                <h3 class="text-2xl font-bold text-gray-800 mb-4">üí§ Beneficios de un buen sue√±o</h3>
                <ul class="space-y-3 mb-8">
                    <li class="flex items-start">
                        <span class="text-indigo-600 mr-3 text-xl">‚Ä¢</span>
                        <span><strong>Reparaci√≥n celular:</strong> Producci√≥n de hormona de crecimiento, regeneraci√≥n tisular</span>
                    </li>
                    <li class="flex items-start">
                        <span class="text-indigo-600 mr-3 text-xl">‚Ä¢</span>
                        <span><strong>Consolidaci√≥n de la memoria:</strong> El cerebro ordena y almacena informaci√≥n</span>
                    </li>
                    <li class="flex items-start">
                        <span class="text-indigo-600 mr-3 text-xl">‚Ä¢</span>
                        <span><strong>Sistema inmunol√≥gico fortalecido:</strong> Producci√≥n de citoquinas protectoras</span>
                    </li>
                    <li class="flex items-start">
                        <span class="text-indigo-600 mr-3 text-xl">‚Ä¢</span>
                        <span><strong>Regulaci√≥n metab√≥lica:</strong> Control del apetito y el peso</span>
                    </li>
                </ul>

                <h3 class="text-2xl font-bold text-gray-800 mb-4">üåô Consejos para dormir mejor</h3>
                <div class="grid gap-4">
                    <div class="flex items-start p-4 bg-indigo-50 rounded-lg">
                        <span class="mr-3 text-2xl">üìÖ</span>
                        <div>
                            <strong>Regularidad:</strong> Acostarse y levantarse a las mismas horas, incluso los fines de semana
                        </div>
                    </div>
                    <div class="flex items-start p-4 bg-indigo-50 rounded-lg">
                        <span class="mr-3 text-2xl">üì±</span>
                        <div>
                            <strong>Pantallas:</strong> Parar 1-2h antes de acostarse (la luz azul altera la melatonina)
                        </div>
                    </div>
                    <div class="flex items-start p-4 bg-indigo-50 rounded-lg">
                        <span class="mr-3 text-2xl">üå°Ô∏è</span>
                        <div>
                            <strong>Temperatura:</strong> Habitaci√≥n fresca (18-19¬∞C) para un sue√±o √≥ptimo
                        </div>
                    </div>
                    <div class="flex items-start p-4 bg-indigo-50 rounded-lg">
                        <span class="mr-3 text-2xl">‚òï</span>
                        <div>
                            <strong>Cafe√≠na:</strong> Evitar despu√©s de las 14h (vida media de 5-6 horas)
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- FAQ Section -->
    <section id="faq" class="py-16 px-4 bg-gradient-to-br from-gray-50 to-blue-50">
        <div class="max-w-4xl mx-auto">
            <h2 class="text-4xl font-bold text-center text-gray-800 mb-8">‚ùì Preguntas Frecuentes</h2>
            <div class="space-y-4">
                <details class="bg-white rounded-xl shadow-md p-6 cursor-pointer hover:shadow-lg transition">
                    <summary class="text-xl font-bold text-gray-800 cursor-pointer">¬øQu√© es la edad biol√≥gica?</summary>
                    <p class="mt-4 text-gray-700">
                        La edad biol√≥gica es una estimaci√≥n de tu edad real basada en tu estado de salud y estilo de vida,
                        en oposici√≥n a tu edad cronol√≥gica (n√∫mero de a√±os desde tu nacimiento). Dos personas de 40 a√±os
                        pueden tener edades biol√≥gicas muy diferentes seg√∫n su modo de vida.
                    </p>
                </details>

                <details class="bg-white rounded-xl shadow-md p-6 cursor-pointer hover:shadow-lg transition">
                    <summary class="text-xl font-bold text-gray-800 cursor-pointer">¬øC√≥mo calcula el test mi edad biol√≥gica?</summary>
                    <p class="mt-4 text-gray-700">
                        Nuestra calculadora analiza 32 factores incluyendo: IMC, nivel de actividad f√≠sica, calidad del sue√±o,
                        nivel de estr√©s, alimentaci√≥n, tabaquismo, consumo de alcohol, salud cardiovascular, salud digestiva,
                        movilidad, exposici√≥n ambiental y salud cognitiva. Cada factor contribuye a ajustar tu edad biol√≥gica
                        al alza o a la baja.
                    </p>
                </details>

                <details class="bg-white rounded-xl shadow-md p-6 cursor-pointer hover:shadow-lg transition">
                    <summary class="text-xl font-bold text-gray-800 cursor-pointer">¬øEl test es realmente gratuito?</summary>
                    <p class="mt-4 text-gray-700">
                        S√≠, la calculadora BioAge es 100% gratuita, sin registro requerido y sin publicidad.
                        Nuestra misi√≥n es sensibilizar al p√∫blico sobre la importancia del estilo de vida en el envejecimiento.
                    </p>
                </details>

                <details class="bg-white rounded-xl shadow-md p-6 cursor-pointer hover:shadow-lg transition">
                    <summary class="text-xl font-bold text-gray-800 cursor-pointer">¬øMis datos est√°n protegidos?</summary>
                    <p class="mt-4 text-gray-700">
                        S√≠, absolutamente. No se recopilan ni almacenan datos personales en nuestros servidores.
                        Todos los c√°lculos se realizan localmente en tu navegador. Tus respuestas nunca salen de tu dispositivo.
                    </p>
                </details>

                <details class="bg-white rounded-xl shadow-md p-6 cursor-pointer hover:shadow-lg transition">
                    <summary class="text-xl font-bold text-gray-800 cursor-pointer">¬øC√≥mo mejorar mi edad biol√≥gica?</summary>
                    <p class="mt-4 text-gray-700">
                        Las principales estrategias incluyen: adoptar una alimentaci√≥n mediterr√°nea rica en vegetales,
                        practicar 150 minutos de actividad f√≠sica por semana, dormir 7-9 horas por noche, gestionar el estr√©s
                        (meditaci√≥n, coherencia card√≠aca), mantener v√≠nculos sociales fuertes, evitar el tabaco y limitar el alcohol.
                        Incluso peque√±os cambios pueden tener un impacto significativo.
                    </p>
                </details>

                <details class="bg-white rounded-xl shadow-md p-6 cursor-pointer hover:shadow-lg transition">
                    <summary class="text-xl font-bold text-gray-800 cursor-pointer">¬øEl test reemplaza una opini√≥n m√©dica?</summary>
                    <p class="mt-4 text-gray-700">
                        <strong>NO.</strong> Esta calculadora es una herramienta educativa e informativa √∫nicamente. No constituye
                        un diagn√≥stico m√©dico y no reemplaza en ning√∫n caso la consulta de un profesional de la salud.
                        Si tienes preocupaciones sobre tu salud, consulta siempre a un m√©dico cualificado.
                    </p>
                </details>

                <details class="bg-white rounded-xl shadow-md p-6 cursor-pointer hover:shadow-lg transition">
                    <summary class="text-xl font-bold text-gray-800 cursor-pointer">¬øCon qu√© frecuencia debo repetir el test?</summary>
                    <p class="mt-4 text-gray-700">
                        Recomendamos repetir el test cada 3-6 meses si has realizado cambios significativos
                        en tu estilo de vida. Esto te permite seguir tu progreso y ajustar tus h√°bitos en consecuencia.
                    </p>
                </details>

                <details class="bg-white rounded-xl shadow-md p-6 cursor-pointer hover:shadow-lg transition">
                    <summary class="text-xl font-bold text-gray-800 cursor-pointer">¬øPuedo realmente rejuvenecer biol√≥gicamente?</summary>
                    <p class="mt-4 text-gray-700">
                        ¬°S√≠! Los estudios cient√≠ficos muestran que es posible reducir la edad biol√≥gica mediante cambios
                        en el estilo de vida. Un estudio de 2021 demostr√≥ que un programa de 8 semanas incluyendo alimentaci√≥n, ejercicio,
                        sue√±o y gesti√≥n del estr√©s redujo la edad biol√≥gica de los participantes en 3,23 a√±os de media.
                    </p>
                </details>

                <details class="bg-white rounded-xl shadow-md p-6 cursor-pointer hover:shadow-lg transition">
                    <summary class="text-xl font-bold text-gray-800 cursor-pointer">¬øQu√© son los tel√≥meros?</summary>
                    <p class="mt-4 text-gray-700">
                        Los tel√≥meros son estructuras protectoras en el extremo de nuestros cromosomas, a menudo comparadas con los remates
                        pl√°sticos de los cordones de zapatos. Se acortan con cada divisi√≥n celular. Una longitud de tel√≥meros
                        m√°s corta est√° asociada con un envejecimiento acelerado y una esperanza de vida reducida. Un estilo de vida saludable puede
                        ralentizar su acortamiento.
                    </p>
                </details>

                <details class="bg-white rounded-xl shadow-md p-6 cursor-pointer hover:shadow-lg transition">
                    <summary class="text-xl font-bold text-gray-800 cursor-pointer">¬øCu√°l es la relaci√≥n entre inflamaci√≥n y envejecimiento?</summary>
                    <p class="mt-4 text-gray-700">
                        La inflamaci√≥n cr√≥nica de bajo grado, llamada "inflammaging", es uno de los mecanismos centrales del envejecimiento.
                        Contribuye a las enfermedades relacionadas con la edad: cardiovasculares, Alzheimer, diabetes, c√°ncer. Reducir la inflamaci√≥n
                        mediante la alimentaci√≥n (antiinflamatoria), el ejercicio, el sue√±o y la gesti√≥n del estr√©s puede ralentizar el envejecimiento.
                    </p>
                </details>

                <details class="bg-white rounded-xl shadow-md p-6 cursor-pointer hover:shadow-lg transition">
                    <summary class="text-xl font-bold text-gray-800 cursor-pointer">¬øLos suplementos alimenticios son √∫tiles?</summary>
                    <p class="mt-4 text-gray-700">
                        La mayor√≠a de los nutrientes deben provenir de una alimentaci√≥n variada y equilibrada. Sin embargo, algunos
                        suplementos pueden ser beneficiosos seg√∫n tu situaci√≥n: vitamina D (si hay d√©ficit), omega-3 (si comes poco
                        pescado), vitamina B12 (vegetarianos/veganos), magnesio. Consulta siempre a un profesional de la salud antes
                        de tomar suplementos.
                    </p>
                </details>

                <details class="bg-white rounded-xl shadow-md p-6 cursor-pointer hover:shadow-lg transition">
                    <summary class="text-xl font-bold text-gray-800 cursor-pointer">¬øC√≥mo contactar al equipo BioAge?</summary>
                    <p class="mt-4 text-gray-700">
                        Para cualquier pregunta, sugerencia o comentario, puedes contactarnos por correo electr√≥nico:
                        <a href="mailto:certifyprofree@gmail.com" class="text-blue-600 hover:underline">certifyprofree@gmail.com</a>.
                        Generalmente respondemos en 48 horas.
                    </p>
                </details>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="bg-gray-800 text-white mt-16">
        <div class="max-w-7xl mx-auto px-4 py-8 sm:px-6 lg:px-8">
            <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                <div>
                    <h3 class="text-lg font-bold mb-4">BioAge</h3>
                    <p class="text-gray-400 text-sm">
                        Calculadora de edad biol√≥gica gratuita para comprender mejor tu salud.
                    </p>
                </div>
                <div>
                    <h3 class="text-lg font-bold mb-4">Enlaces R√°pidos</h3>
                    <ul class="space-y-2 text-sm">
                        <li><a href="#alimentation" class="text-gray-400 hover:text-white transition">Alimentaci√≥n</a></li>
                        <li><a href="#sport" class="text-gray-400 hover:text-white transition">Deporte</a></li>
                        <li><a href="#stress" class="text-gray-400 hover:text-white transition">Estr√©s</a></li>
                        <li><a href="#sommeil" class="text-gray-400 hover:text-white transition">Sue√±o</a></li>
                        <li><a href="#faq" class="text-gray-400 hover:text-white transition">FAQ</a></li>
                    </ul>
                </div>
                <div>
                    <h3 class="text-lg font-bold mb-4">Contacto</h3>
                    <p class="text-gray-400 text-sm">
                        Email: <a href="mailto:certifyprofree@gmail.com" class="text-purple-400 hover:text-purple-300">certifyprofree@gmail.com</a>
                    </p>
                </div>
            </div>
            <div class="border-t border-gray-700 mt-8 pt-8 text-center text-sm text-gray-400">
                <p>&copy; 2025 BioAge. Todos los derechos reservados.</p>
            </div>
        </div>
    </footer>

    <script>
        // Global state
        const formData = {
            // Step 1 - Basic Info
            age: '',
            weight: '',
            height: '',
            gender: '',
            activityLevel: '',

            // Step 2 - Advanced Health
            bloodPressure: '',
            cholesterol: '',
            bloodSugar: '',
            familyHeartDisease: '',
            chronicInflammation: '',
            digestiveProblems: '',
            foodAllergies: '',
            jointPain: '',
            balanceIssues: '',
            flexibility: '',
            airQuality: '',
            sunExposure: '',
            memoryIssues: '',
            concentrationProblems: '',
            reactionTime: '',

            // Step 3 - Wellbeing
            smoking: '',
            alcohol: '',
            sleepHours: '',
            sleepQuality: '',
            stressLevel: '',
            socialConnections: '',
            meditation: '',
            lifeSatisfaction: '',
            vegetableServings: '',
            processedFood: '',
            waterIntake: '',
            screenTime: ''
        };

        let currentStepNumber = 1;

        // Cookie consent functions
        function acceptCookies() {
            localStorage.setItem('cookieConsent', 'accepted');
            document.getElementById('cookieConsent').classList.remove('show');

            // Load Google Analytics
            const ga = document.createElement('script');
            ga.async = true;
            ga.src = 'https://www.googletagmanager.com/gtag/js?id=G-DMCMNW4KLZ';
            document.head.appendChild(ga);

            window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
            gtag('config', 'G-DMCMNW4KLZ', { 'anonymize_ip': true });
        }

        function declineCookies() {
            localStorage.setItem('cookieConsent', 'declined');
            document.getElementById('cookieConsent').classList.remove('show');
        }

        // Show cookie banner if no consent recorded
        function checkCookieConsent() {
            const consent = localStorage.getItem('cookieConsent');
            if (!consent) {
                document.getElementById('cookieConsent').classList.add('show');
            }
        }

        // Update progress bar
        function updateProgress() {
            const percent = (currentStepNumber / 4) * 100;
            document.getElementById('currentStep').textContent = currentStepNumber;
            document.getElementById('progressPercent').textContent = Math.round(percent);
            document.getElementById('progressBar').style.width = percent + '%';
        }

        // Render functions for each step
        function renderStep1() {
            return `
                <h2 class="text-3xl font-bold mb-6 gradient-bg bg-clip-text text-transparent" style="-webkit-background-clip: text; -webkit-text-fill-color: transparent;">
                    Informaci√≥n B√°sica
                </h2>

                <div class="question-item">
                    <label class="question-label">Edad (a√±os)</label>
                    <input type="number" id="age" min="18" max="120" value="${formData.age}" placeholder="Ej: 35">
                </div>

                <div class="question-item">
                    <label class="question-label">Peso (kg)</label>
                    <input type="number" id="weight" min="30" max="300" step="0.1" value="${formData.weight}" placeholder="Ej: 70">
                </div>

                <div class="question-item">
                    <label class="question-label">Altura (cm)</label>
                    <input type="number" id="height" min="100" max="250" value="${formData.height}" placeholder="Ej: 170">
                </div>

                <div class="question-item">
                    <label class="question-label">Sexo</label>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" id="gender_m" name="gender" value="M" ${formData.gender === 'M' ? 'checked' : ''}>
                            <label for="gender_m">Hombre</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="gender_f" name="gender" value="F" ${formData.gender === 'F' ? 'checked' : ''}>
                            <label for="gender_f">Mujer</label>
                        </div>
                    </div>
                </div>

                <div class="question-item">
                    <label class="question-label">Nivel de actividad f√≠sica</label>
                    <select id="activityLevel" class="w-full">
                        <option value="">Selecciona...</option>
                        <option value="sedentary" ${formData.activityLevel === 'sedentary' ? 'selected' : ''}>Sedentario (poco o ning√∫n ejercicio)</option>
                        <option value="light" ${formData.activityLevel === 'light' ? 'selected' : ''}>Ligero (1-3 d√≠as/semana)</option>
                        <option value="moderate" ${formData.activityLevel === 'moderate' ? 'selected' : ''}>Moderado (3-5 d√≠as/semana)</option>
                        <option value="intense" ${formData.activityLevel === 'intense' ? 'selected' : ''}>Intenso (6-7 d√≠as/semana)</option>
                        <option value="very_intense" ${formData.activityLevel === 'very_intense' ? 'selected' : ''}>Muy intenso (2x al d√≠a)</option>
                    </select>
                </div>

                <div class="flex justify-end gap-4 mt-8">
                    <button onclick="nextStep()" class="btn btn-primary">Siguiente</button>
                </div>
            `;
        }

        function renderStep2() {
            return `
                <h2 class="text-3xl font-bold mb-6 gradient-bg bg-clip-text text-transparent" style="-webkit-background-clip: text; -webkit-text-fill-color: transparent;">
                    Salud Avanzada
                </h2>

                <div class="question-item">
                    <label class="question-label">Presi√≥n arterial</label>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" id="bp_normal" name="bloodPressure" value="normal" ${formData.bloodPressure === 'normal' ? 'checked' : ''}>
                            <label for="bp_normal">Normal</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="bp_elevated" name="bloodPressure" value="elevated" ${formData.bloodPressure === 'elevated' ? 'checked' : ''}>
                            <label for="bp_elevated">Elevada</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="bp_high" name="bloodPressure" value="high" ${formData.bloodPressure === 'high' ? 'checked' : ''}>
                            <label for="bp_high">Alta</label>
                        </div>
                    </div>
                </div>

                <div class="question-item">
                    <label class="question-label">Colesterol</label>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" id="chol_normal" name="cholesterol" value="normal" ${formData.cholesterol === 'normal' ? 'checked' : ''}>
                            <label for="chol_normal">Normal</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="chol_borderline" name="cholesterol" value="borderline" ${formData.cholesterol === 'borderline' ? 'checked' : ''}>
                            <label for="chol_borderline">L√≠mite</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="chol_high" name="cholesterol" value="high" ${formData.cholesterol === 'high' ? 'checked' : ''}>
                            <label for="chol_high">Elevado</label>
                        </div>
                    </div>
                </div>

                <div class="question-item">
                    <label class="question-label">Glucemia (az√∫car en sangre)</label>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" id="bs_normal" name="bloodSugar" value="normal" ${formData.bloodSugar === 'normal' ? 'checked' : ''}>
                            <label for="bs_normal">Normal</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="bs_prediabetes" name="bloodSugar" value="prediabetes" ${formData.bloodSugar === 'prediabetes' ? 'checked' : ''}>
                            <label for="bs_prediabetes">Prediabetes</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="bs_diabetes" name="bloodSugar" value="diabetes" ${formData.bloodSugar === 'diabetes' ? 'checked' : ''}>
                            <label for="bs_diabetes">Diabetes</label>
                        </div>
                    </div>
                </div>

                <div class="question-item">
                    <label class="question-label">Antecedentes familiares de enfermedad card√≠aca</label>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" id="fhd_no" name="familyHeartDisease" value="no" ${formData.familyHeartDisease === 'no' ? 'checked' : ''}>
                            <label for="fhd_no">No</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="fhd_yes" name="familyHeartDisease" value="yes" ${formData.familyHeartDisease === 'yes' ? 'checked' : ''}>
                            <label for="fhd_yes">S√≠</label>
                        </div>
                    </div>
                </div>

                <div class="question-item">
                    <label class="question-label">Inflamaci√≥n cr√≥nica</label>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" id="ci_no" name="chronicInflammation" value="no" ${formData.chronicInflammation === 'no' ? 'checked' : ''}>
                            <label for="ci_no">No</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="ci_yes" name="chronicInflammation" value="yes" ${formData.chronicInflammation === 'yes' ? 'checked' : ''}>
                            <label for="ci_yes">S√≠</label>
                        </div>
                    </div>
                </div>

                <div class="question-item">
                    <label class="question-label">Problemas digestivos</label>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" id="dp_no" name="digestiveProblems" value="no" ${formData.digestiveProblems === 'no' ? 'checked' : ''}>
                            <label for="dp_no">No</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="dp_yes" name="digestiveProblems" value="yes" ${formData.digestiveProblems === 'yes' ? 'checked' : ''}>
                            <label for="dp_yes">S√≠</label>
                        </div>
                    </div>
                </div>

                <div class="question-item">
                    <label class="question-label">Alergias alimentarias</label>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" id="fa_no" name="foodAllergies" value="no" ${formData.foodAllergies === 'no' ? 'checked' : ''}>
                            <label for="fa_no">No</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="fa_yes" name="foodAllergies" value="yes" ${formData.foodAllergies === 'yes' ? 'checked' : ''}>
                            <label for="fa_yes">S√≠</label>
                        </div>
                    </div>
                </div>

                <div class="question-item">
                    <label class="question-label">Dolores articulares</label>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" id="jp_no" name="jointPain" value="no" ${formData.jointPain === 'no' ? 'checked' : ''}>
                            <label for="jp_no">No</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="jp_yes" name="jointPain" value="yes" ${formData.jointPain === 'yes' ? 'checked' : ''}>
                            <label for="jp_yes">S√≠</label>
                        </div>
                    </div>
                </div>

                <div class="question-item">
                    <label class="question-label">Problemas de equilibrio</label>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" id="bi_no" name="balanceIssues" value="no" ${formData.balanceIssues === 'no' ? 'checked' : ''}>
                            <label for="bi_no">No</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="bi_yes" name="balanceIssues" value="yes" ${formData.balanceIssues === 'yes' ? 'checked' : ''}>
                            <label for="bi_yes">S√≠</label>
                        </div>
                    </div>
                </div>

                <div class="question-item">
                    <label class="question-label">Flexibilidad</label>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" id="flex_good" name="flexibility" value="good" ${formData.flexibility === 'good' ? 'checked' : ''}>
                            <label for="flex_good">Buena</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="flex_average" name="flexibility" value="average" ${formData.flexibility === 'average' ? 'checked' : ''}>
                            <label for="flex_average">Media</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="flex_poor" name="flexibility" value="poor" ${formData.flexibility === 'poor' ? 'checked' : ''}>
                            <label for="flex_poor">Baja</label>
                        </div>
                    </div>
                </div>

                <div class="question-item">
                    <label class="question-label">Exposici√≥n a contaminaci√≥n del aire</label>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" id="aq_good" name="airQuality" value="good" ${formData.airQuality === 'good' ? 'checked' : ''}>
                            <label for="aq_good">Buena</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="aq_moderate" name="airQuality" value="moderate" ${formData.airQuality === 'moderate' ? 'checked' : ''}>
                            <label for="aq_moderate">Moderada</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="aq_poor" name="airQuality" value="poor" ${formData.airQuality === 'poor' ? 'checked' : ''}>
                            <label for="aq_poor">Mala</label>
                        </div>
                    </div>
                </div>

                <div class="question-item">
                    <label class="question-label">Exposici√≥n al sol</label>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" id="sun_low" name="sunExposure" value="low" ${formData.sunExposure === 'low' ? 'checked' : ''}>
                            <label for="sun_low">Baja</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="sun_moderate" name="sunExposure" value="moderate" ${formData.sunExposure === 'moderate' ? 'checked' : ''}>
                            <label for="sun_moderate">Moderada</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="sun_high" name="sunExposure" value="high" ${formData.sunExposure === 'high' ? 'checked' : ''}>
                            <label for="sun_high">Elevada</label>
                        </div>
                    </div>
                </div>

                <div class="question-item">
                    <label class="question-label">Problemas de memoria</label>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" id="mi_no" name="memoryIssues" value="no" ${formData.memoryIssues === 'no' ? 'checked' : ''}>
                            <label for="mi_no">No</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="mi_yes" name="memoryIssues" value="yes" ${formData.memoryIssues === 'yes' ? 'checked' : ''}>
                            <label for="mi_yes">S√≠</label>
                        </div>
                    </div>
                </div>

                <div class="question-item">
                    <label class="question-label">Dificultades de concentraci√≥n</label>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" id="cp_no" name="concentrationProblems" value="no" ${formData.concentrationProblems === 'no' ? 'checked' : ''}>
                            <label for="cp_no">No</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="cp_yes" name="concentrationProblems" value="yes" ${formData.concentrationProblems === 'yes' ? 'checked' : ''}>
                            <label for="cp_yes">S√≠</label>
                        </div>
                    </div>
                </div>

                <div class="question-item">
                    <label class="question-label">Tiempo de reacci√≥n</label>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" id="rt_fast" name="reactionTime" value="fast" ${formData.reactionTime === 'fast' ? 'checked' : ''}>
                            <label for="rt_fast">R√°pido</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="rt_average" name="reactionTime" value="average" ${formData.reactionTime === 'average' ? 'checked' : ''}>
                            <label for="rt_average">Medio</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="rt_slow" name="reactionTime" value="slow" ${formData.reactionTime === 'slow' ? 'checked' : ''}>
                            <label for="rt_slow">Lento</label>
                        </div>
                    </div>
                </div>

                <div class="flex justify-between gap-4 mt-8">
                    <button onclick="previousStep()" class="btn btn-secondary">Anterior</button>
                    <button onclick="nextStep()" class="btn btn-primary">Siguiente</button>
                </div>
            `;
        }

        function renderStep3() {
            return `
                <h2 class="text-3xl font-bold mb-6 gradient-bg bg-clip-text text-transparent" style="-webkit-background-clip: text; -webkit-text-fill-color: transparent;">
                    Bienestar y Estilo de Vida
                </h2>

                <div class="question-item">
                    <label class="question-label">Tabaquismo</label>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" id="smoke_never" name="smoking" value="never" ${formData.smoking === 'never' ? 'checked' : ''}>
                            <label for="smoke_never">Nunca</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="smoke_former" name="smoking" value="former" ${formData.smoking === 'former' ? 'checked' : ''}>
                            <label for="smoke_former">Exfumador</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="smoke_current" name="smoking" value="current" ${formData.smoking === 'current' ? 'checked' : ''}>
                            <label for="smoke_current">Actual</label>
                        </div>
                    </div>
                </div>

                <div class="question-item">
                    <label class="question-label">Consumo de alcohol</label>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" id="alc_none" name="alcohol" value="none" ${formData.alcohol === 'none' ? 'checked' : ''}>
                            <label for="alc_none">Ninguno</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="alc_moderate" name="alcohol" value="moderate" ${formData.alcohol === 'moderate' ? 'checked' : ''}>
                            <label for="alc_moderate">Moderado</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="alc_heavy" name="alcohol" value="heavy" ${formData.alcohol === 'heavy' ? 'checked' : ''}>
                            <label for="alc_heavy">Elevado</label>
                        </div>
                    </div>
                </div>

                <div class="question-item">
                    <label class="question-label">Horas de sue√±o por noche</label>
                    <input type="number" id="sleepHours" min="0" max="24" step="0.5" value="${formData.sleepHours}" placeholder="Ej: 7">
                </div>

                <div class="question-item">
                    <label class="question-label">Calidad del sue√±o</label>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" id="sq_good" name="sleepQuality" value="good" ${formData.sleepQuality === 'good' ? 'checked' : ''}>
                            <label for="sq_good">Buena</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="sq_average" name="sleepQuality" value="average" ${formData.sleepQuality === 'average' ? 'checked' : ''}>
                            <label for="sq_average">Media</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="sq_poor" name="sleepQuality" value="poor" ${formData.sleepQuality === 'poor' ? 'checked' : ''}>
                            <label for="sq_poor">Mala</label>
                        </div>
                    </div>
                </div>

                <div class="question-item">
                    <label class="question-label">Nivel de estr√©s</label>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" id="stress_low" name="stressLevel" value="low" ${formData.stressLevel === 'low' ? 'checked' : ''}>
                            <label for="stress_low">Bajo</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="stress_moderate" name="stressLevel" value="moderate" ${formData.stressLevel === 'moderate' ? 'checked' : ''}>
                            <label for="stress_moderate">Moderado</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="stress_high" name="stressLevel" value="high" ${formData.stressLevel === 'high' ? 'checked' : ''}>
                            <label for="stress_high">Alto</label>
                        </div>
                    </div>
                </div>

                <div class="question-item">
                    <label class="question-label">Conexiones sociales</label>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" id="sc_many" name="socialConnections" value="many" ${formData.socialConnections === 'many' ? 'checked' : ''}>
                            <label for="sc_many">Muchas</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="sc_some" name="socialConnections" value="some" ${formData.socialConnections === 'some' ? 'checked' : ''}>
                            <label for="sc_some">Algunas</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="sc_few" name="socialConnections" value="few" ${formData.socialConnections === 'few' ? 'checked' : ''}>
                            <label for="sc_few">Pocas</label>
                        </div>
                    </div>
                </div>

                <div class="question-item">
                    <label class="question-label">Meditaci√≥n / Relajaci√≥n regular</label>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" id="med_yes" name="meditation" value="yes" ${formData.meditation === 'yes' ? 'checked' : ''}>
                            <label for="med_yes">S√≠</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="med_no" name="meditation" value="no" ${formData.meditation === 'no' ? 'checked' : ''}>
                            <label for="med_no">No</label>
                        </div>
                    </div>
                </div>

                <div class="question-item">
                    <label class="question-label">Satisfacci√≥n con la vida</label>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" id="ls_high" name="lifeSatisfaction" value="high" ${formData.lifeSatisfaction === 'high' ? 'checked' : ''}>
                            <label for="ls_high">Alta</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="ls_medium" name="lifeSatisfaction" value="medium" ${formData.lifeSatisfaction === 'medium' ? 'checked' : ''}>
                            <label for="ls_medium">Media</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="ls_low" name="lifeSatisfaction" value="low" ${formData.lifeSatisfaction === 'low' ? 'checked' : ''}>
                            <label for="ls_low">Baja</label>
                        </div>
                    </div>
                </div>

                <div class="question-item">
                    <label class="question-label">Porciones de verduras al d√≠a</label>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" id="veg_0_1" name="vegetableServings" value="0-1" ${formData.vegetableServings === '0-1' ? 'checked' : ''}>
                            <label for="veg_0_1">0-1</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="veg_2_3" name="vegetableServings" value="2-3" ${formData.vegetableServings === '2-3' ? 'checked' : ''}>
                            <label for="veg_2_3">2-3</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="veg_4_5" name="vegetableServings" value="4-5" ${formData.vegetableServings === '4-5' ? 'checked' : ''}>
                            <label for="veg_4_5">4-5</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="veg_6plus" name="vegetableServings" value="6+" ${formData.vegetableServings === '6+' ? 'checked' : ''}>
                            <label for="veg_6plus">6+</label>
                        </div>
                    </div>
                </div>

                <div class="question-item">
                    <label class="question-label">Consumo de alimentos procesados</label>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" id="pf_rarely" name="processedFood" value="rarely" ${formData.processedFood === 'rarely' ? 'checked' : ''}>
                            <label for="pf_rarely">Raramente</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="pf_sometimes" name="processedFood" value="sometimes" ${formData.processedFood === 'sometimes' ? 'checked' : ''}>
                            <label for="pf_sometimes">A veces</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="pf_often" name="processedFood" value="often" ${formData.processedFood === 'often' ? 'checked' : ''}>
                            <label for="pf_often">A menudo</label>
                        </div>
                    </div>
                </div>

                <div class="question-item">
                    <label class="question-label">Consumo de agua</label>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" id="water_insufficient" name="waterIntake" value="insufficient" ${formData.waterIntake === 'insufficient' ? 'checked' : ''}>
                            <label for="water_insufficient">Insuficiente</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="water_adequate" name="waterIntake" value="adequate" ${formData.waterIntake === 'adequate' ? 'checked' : ''}>
                            <label for="water_adequate">Adecuado</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="water_excellent" name="waterIntake" value="excellent" ${formData.waterIntake === 'excellent' ? 'checked' : ''}>
                            <label for="water_excellent">Excelente</label>
                        </div>
                    </div>
                </div>

                <div class="question-item">
                    <label class="question-label">Tiempo de pantalla al d√≠a (horas)</label>
                    <input type="number" id="screenTime" min="0" max="24" step="0.5" value="${formData.screenTime}" placeholder="Ej: 4">
                </div>

                <div class="flex justify-between gap-4 mt-8">
                    <button onclick="previousStep()" class="btn btn-secondary">Anterior</button>
                    <button onclick="calculateResults()" class="btn btn-primary">Calcular mi edad biol√≥gica</button>
                </div>
            `;
        }

        function renderStep4(bioAge, recommendations) {
            const age = parseInt(formData.age);
            const diff = bioAge - age;
            const isYounger = diff < 0;
            const gradientClass = isYounger ? 'gradient-success' : (diff > 5 ? 'gradient-danger' : 'gradient-warning');

            const shareText = encodeURIComponent(`¬°Mi edad biol√≥gica es de ${bioAge} a√±os! Descubre la tuya en BioAge`);
            const shareUrl = encodeURIComponent('https://www.agebiologique.eu/');

            return `
                <h2 class="text-3xl font-bold mb-6 gradient-bg bg-clip-text text-transparent" style="-webkit-background-clip: text; -webkit-text-fill-color: transparent;">
                    Tus Resultados
                </h2>

                <!-- Results Card -->
                <div class="${gradientClass} text-white rounded-2xl p-8 mb-8 text-center">
                    <h3 class="text-xl mb-4">Tu Edad Biol√≥gica</h3>
                    <div class="text-6xl font-bold mb-4">${bioAge} a√±os</div>
                    <div class="text-lg">
                        ${isYounger
                            ? `¬°Felicidades! Eres ${Math.abs(diff)} a√±o(s) m√°s joven que tu edad cronol√≥gica.`
                            : diff === 0
                                ? 'Tu edad biol√≥gica corresponde a tu edad cronol√≥gica.'
                                : `Tu edad biol√≥gica es ${diff} a√±o(s) superior a tu edad cronol√≥gica.`
                        }
                    </div>
                    <div class="mt-4 text-sm opacity-90">
                        Edad cronol√≥gica: ${age} a√±os
                    </div>
                </div>

                <!-- Medical Disclaimer -->
                <div class="disclaimer-banner">
                    <div class="flex items-start gap-3">
                        <svg class="w-6 h-6 text-amber-600 flex-shrink-0 mt-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path>
                        </svg>
                        <div>
                            <h3 class="font-bold text-amber-900 mb-1">Recordatorio Importante</h3>
                            <p class="text-sm text-amber-800">
                                Estos resultados son una estimaci√≥n basada en tu estilo de vida.
                                <strong>Esto NO es un diagn√≥stico m√©dico.</strong>
                                Consulta siempre a un profesional de la salud para consejos personalizados.
                            </p>
                        </div>
                    </div>
                </div>

                <!-- Recommendations -->
                <div class="mb-8">
                    <h3 class="text-2xl font-bold mb-4">Recomendaciones Personalizadas</h3>
                    <div class="space-y-3">
                        ${recommendations.map(rec => `
                            <div class="flex items-start gap-3 p-4 bg-blue-50 rounded-lg border-l-4 border-blue-500">
                                <svg class="w-6 h-6 text-blue-500 flex-shrink-0 mt-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path>
                                </svg>
                                <p class="text-gray-800">${rec}</p>
                            </div>
                        `).join('')}
                    </div>
                </div>

                <!-- Social Share -->
                <div class="mb-8">
                    <h3 class="text-xl font-bold mb-4">Comparte tus resultados</h3>
                    <div class="flex flex-wrap gap-3">
                        <a href="https://www.facebook.com/sharer/sharer.php?u=${shareUrl}&quote=${shareText}"
                           target="_blank"
                           class="share-btn share-facebook">
                            <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/>
                            </svg>
                            Facebook
                        </a>
                        <a href="https://twitter.com/intent/tweet?text=${shareText}&url=${shareUrl}"
                           target="_blank"
                           class="share-btn share-twitter">
                            <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M23.953 4.57a10 10 0 01-2.825.775 4.958 4.958 0 002.163-2.723c-.951.555-2.005.959-3.127 1.184a4.92 4.92 0 00-8.384 4.482C7.69 8.095 4.067 6.13 1.64 3.162a4.822 4.822 0 00-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 01-2.228-.616v.06a4.923 4.923 0 003.946 4.827 4.996 4.996 0 01-2.212.085 4.936 4.936 0 004.604 3.417 9.867 9.867 0 01-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 007.557 2.209c9.053 0 13.998-7.496 13.998-13.985 0-.21 0-.42-.015-.63A9.935 9.935 0 0024 4.59z"/>
                            </svg>
                            Twitter
                        </a>
                        <a href="https://wa.me/?text=${shareText}%20${shareUrl}"
                           target="_blank"
                           class="share-btn share-whatsapp">
                            <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"/>
                            </svg>
                            WhatsApp
                        </a>
                    </div>
                </div>

                <div class="flex justify-center">
                    <button onclick="resetQuiz()" class="btn btn-primary">Reiniciar el test</button>
                </div>
            `;
        }

        // Save form data for current step
        function saveStepData() {
            if (currentStepNumber === 1) {
                formData.age = document.getElementById('age')?.value || '';
                formData.weight = document.getElementById('weight')?.value || '';
                formData.height = document.getElementById('height')?.value || '';
                formData.gender = document.querySelector('input[name="gender"]:checked')?.value || '';
                formData.activityLevel = document.getElementById('activityLevel')?.value || '';
            } else if (currentStepNumber === 2) {
                formData.bloodPressure = document.querySelector('input[name="bloodPressure"]:checked')?.value || '';
                formData.cholesterol = document.querySelector('input[name="cholesterol"]:checked')?.value || '';
                formData.bloodSugar = document.querySelector('input[name="bloodSugar"]:checked')?.value || '';
                formData.familyHeartDisease = document.querySelector('input[name="familyHeartDisease"]:checked')?.value || '';
                formData.chronicInflammation = document.querySelector('input[name="chronicInflammation"]:checked')?.value || '';
                formData.digestiveProblems = document.querySelector('input[name="digestiveProblems"]:checked')?.value || '';
                formData.foodAllergies = document.querySelector('input[name="foodAllergies"]:checked')?.value || '';
                formData.jointPain = document.querySelector('input[name="jointPain"]:checked')?.value || '';
                formData.balanceIssues = document.querySelector('input[name="balanceIssues"]:checked')?.value || '';
                formData.flexibility = document.querySelector('input[name="flexibility"]:checked')?.value || '';
                formData.airQuality = document.querySelector('input[name="airQuality"]:checked')?.value || '';
                formData.sunExposure = document.querySelector('input[name="sunExposure"]:checked')?.value || '';
                formData.memoryIssues = document.querySelector('input[name="memoryIssues"]:checked')?.value || '';
                formData.concentrationProblems = document.querySelector('input[name="concentrationProblems"]:checked')?.value || '';
                formData.reactionTime = document.querySelector('input[name="reactionTime"]:checked')?.value || '';
            } else if (currentStepNumber === 3) {
                formData.smoking = document.querySelector('input[name="smoking"]:checked')?.value || '';
                formData.alcohol = document.querySelector('input[name="alcohol"]:checked')?.value || '';
                formData.sleepHours = document.getElementById('sleepHours')?.value || '';
                formData.sleepQuality = document.querySelector('input[name="sleepQuality"]:checked')?.value || '';
                formData.stressLevel = document.querySelector('input[name="stressLevel"]:checked')?.value || '';
                formData.socialConnections = document.querySelector('input[name="socialConnections"]:checked')?.value || '';
                formData.meditation = document.querySelector('input[name="meditation"]:checked')?.value || '';
                formData.lifeSatisfaction = document.querySelector('input[name="lifeSatisfaction"]:checked')?.value || '';
                formData.vegetableServings = document.querySelector('input[name="vegetableServings"]:checked')?.value || '';
                formData.processedFood = document.querySelector('input[name="processedFood"]:checked')?.value || '';
                formData.waterIntake = document.querySelector('input[name="waterIntake"]:checked')?.value || '';
                formData.screenTime = document.getElementById('screenTime')?.value || '';
            }
        }

        // Validate current step
        function validateStep() {
            if (currentStepNumber === 1) {
                if (!formData.age || !formData.weight || !formData.height || !formData.gender || !formData.activityLevel) {
                    alert('Por favor, completa todos los campos obligatorios.');
                    return false;
                }
                const age = parseInt(formData.age);
                if (age < 18 || age > 120) {
                    alert('La edad debe estar entre 18 y 120 a√±os.');
                    return false;
                }
            } else if (currentStepNumber === 2) {
                const requiredFields = [
                    'bloodPressure', 'cholesterol', 'bloodSugar', 'familyHeartDisease',
                    'chronicInflammation', 'digestiveProblems', 'foodAllergies', 'jointPain',
                    'balanceIssues', 'flexibility', 'airQuality', 'sunExposure',
                    'memoryIssues', 'concentrationProblems', 'reactionTime'
                ];
                for (const field of requiredFields) {
                    if (!formData[field]) {
                        alert('Por favor, responde a todas las preguntas.');
                        return false;
                    }
                }
            } else if (currentStepNumber === 3) {
                const requiredFields = [
                    'smoking', 'alcohol', 'sleepHours', 'sleepQuality', 'stressLevel',
                    'socialConnections', 'meditation', 'lifeSatisfaction', 'vegetableServings',
                    'processedFood', 'waterIntake', 'screenTime'
                ];
                for (const field of requiredFields) {
                    if (!formData[field]) {
                        alert('Por favor, responde a todas las preguntas.');
                        return false;
                    }
                }
            }
            return true;
        }

        // Navigation functions
        function nextStep() {
            saveStepData();
            if (!validateStep()) {
                return;
            }
            currentStepNumber++;
            renderCurrentStep();
            updateProgress();
            window.scrollTo(0, 0);
        }

        function previousStep() {
            saveStepData();
            currentStepNumber--;
            renderCurrentStep();
            updateProgress();
            window.scrollTo(0, 0);
        }

        function resetQuiz() {
            // Reset all form data
            Object.keys(formData).forEach(key => formData[key] = '');
            currentStepNumber = 1;
            renderCurrentStep();
            updateProgress();
            window.scrollTo(0, 0);
        }

        // Calculate biological age
        function calculateResults() {
            saveStepData();
            if (!validateStep()) {
                return;
            }

            let bioAge = parseInt(formData.age);
            const recommendations = [];

            // BMI calculation and adjustment
            const weight = parseFloat(formData.weight);
            const heightM = parseFloat(formData.height) / 100;
            const bmi = weight / (heightM * heightM);

            if (bmi < 18.5) {
                bioAge += 1.5;
                recommendations.push('Tu IMC es bajo. Consulta a un nutricionista para alcanzar un peso saludable.');
            } else if (bmi >= 25 && bmi < 30) {
                bioAge += 2;
                recommendations.push('Tu IMC indica sobrepeso. Busca una p√©rdida de peso progresiva con alimentaci√≥n equilibrada y ejercicio.');
            } else if (bmi >= 30) {
                bioAge += 4;
                recommendations.push('Tu IMC indica obesidad. Una p√©rdida de peso es muy recomendada para tu salud.');
            }

            // Activity level
            switch(formData.activityLevel) {
                case 'sedentary':
                    bioAge += 3;
                    recommendations.push('Aumenta tu actividad f√≠sica. Comienza con 30 minutos de caminata diaria.');
                    break;
                case 'light':
                    bioAge += 1;
                    recommendations.push('Aumenta la frecuencia de tus ejercicios a 4-5 veces por semana.');
                    break;
                case 'moderate':
                    bioAge -= 1;
                    break;
                case 'intense':
                    bioAge -= 2;
                    break;
                case 'very_intense':
                    bioAge -= 3;
                    break;
            }

            // Blood pressure
            if (formData.bloodPressure === 'elevated') {
                bioAge += 1.5;
                recommendations.push('Vigila tu presi√≥n arterial. Reduce la sal y consulta a un m√©dico.');
            } else if (formData.bloodPressure === 'high') {
                bioAge += 3;
                recommendations.push('Hipertensi√≥n detectada. Consulta m√©dica urgente recomendada.');
            }

            // Cholesterol
            if (formData.cholesterol === 'borderline') {
                bioAge += 1;
                recommendations.push('Colesterol l√≠mite. Adopta una alimentaci√≥n baja en grasas saturadas.');
            } else if (formData.cholesterol === 'high') {
                bioAge += 2.5;
                recommendations.push('Colesterol elevado. Consulta a un m√©dico y modifica tu alimentaci√≥n.');
            }

            // Blood sugar
            if (formData.bloodSugar === 'prediabetes') {
                bioAge += 2;
                recommendations.push('Prediabetes detectada. Reduce los az√∫cares y aumenta la actividad f√≠sica.');
            } else if (formData.bloodSugar === 'diabetes') {
                bioAge += 4;
                recommendations.push('Diabetes identificada. Seguimiento m√©dico regular indispensable.');
            }

            // Family history
            if (formData.familyHeartDisease === 'yes') {
                bioAge += 1.5;
                recommendations.push('Antecedentes familiares card√≠acos. Vigila regularmente tu salud cardiovascular.');
            }

            // Chronic inflammation
            if (formData.chronicInflammation === 'yes') {
                bioAge += 2;
                recommendations.push('Inflamaci√≥n cr√≥nica. Adopta una alimentaci√≥n antiinflamatoria (omega-3, verduras).');
            }

            // Digestive problems
            if (formData.digestiveProblems === 'yes') {
                bioAge += 1;
                recommendations.push('Problemas digestivos. Consulta a un gastroenter√≥logo y ajusta tu alimentaci√≥n.');
            }

            // Food allergies
            if (formData.foodAllergies === 'yes') {
                bioAge += 0.5;
            }

            // Joint pain
            if (formData.jointPain === 'yes') {
                bioAge += 1.5;
                recommendations.push('Dolores articulares. Practica ejercicios de bajo impacto (nataci√≥n, yoga).');
            }

            // Balance issues
            if (formData.balanceIssues === 'yes') {
                bioAge += 2;
                recommendations.push('Problemas de equilibrio. Consulta a un m√©dico y practica ejercicios de equilibrio.');
            }

            // Flexibility
            if (formData.flexibility === 'average') {
                bioAge += 0.5;
                recommendations.push('Trabaja tu flexibilidad con estiramientos diarios.');
            } else if (formData.flexibility === 'poor') {
                bioAge += 1.5;
                recommendations.push('Flexibilidad baja. Integra el yoga o los estiramientos en tu rutina.');
            }

            // Air quality
            if (formData.airQuality === 'moderate') {
                bioAge += 0.5;
            } else if (formData.airQuality === 'poor') {
                bioAge += 1.5;
                recommendations.push('Exposici√≥n a mala calidad del aire. Usa un purificador de aire y evita zonas contaminadas.');
            }

            // Sun exposure
            if (formData.sunExposure === 'low') {
                bioAge += 1;
                recommendations.push('Exposici√≥n al sol baja. Aumenta prudentemente tu exposici√≥n (vitamina D).');
            } else if (formData.sunExposure === 'high') {
                bioAge += 1.5;
                recommendations.push('Exposici√≥n excesiva al sol. Protege tu piel con crema solar.');
            }

            // Memory issues
            if (formData.memoryIssues === 'yes') {
                bioAge += 2;
                recommendations.push('Problemas de memoria. Haz ejercicios cerebrales y consulta si persiste.');
            }

            // Concentration problems
            if (formData.concentrationProblems === 'yes') {
                bioAge += 1;
                recommendations.push('Dificultades de concentraci√≥n. Mejora tu sue√±o y reduce las distracciones.');
            }

            // Reaction time
            if (formData.reactionTime === 'average') {
                bioAge += 0.5;
            } else if (formData.reactionTime === 'slow') {
                bioAge += 1.5;
                recommendations.push('Tiempo de reacci√≥n lento. Practica actividades estimulantes (deportes, juegos de reflejos).');
            }

            // Smoking
            if (formData.smoking === 'former') {
                bioAge += 1;
                recommendations.push('Exfumador. Contin√∫a con tu buena decisi√≥n. Tus pulmones siguen regener√°ndose.');
            } else if (formData.smoking === 'current') {
                bioAge += 5;
                recommendations.push('Tabaquismo activo. Dejar de fumar es lo mejor para tu salud. Consulta a un especialista.');
            }

            // Alcohol
            if (formData.alcohol === 'moderate') {
                bioAge += 0.5;
            } else if (formData.alcohol === 'heavy') {
                bioAge += 3;
                recommendations.push('Consumo de alcohol excesivo. Reduce progresivamente y consulta si es necesario.');
            }

            // Sleep hours
            const sleepHours = parseFloat(formData.sleepHours);
            if (sleepHours < 6) {
                bioAge += 3;
                recommendations.push('Sue√±o insuficiente. Busca 7-9 horas por noche para una salud √≥ptima.');
            } else if (sleepHours < 7) {
                bioAge += 1.5;
                recommendations.push('Aumenta ligeramente tu tiempo de sue√±o a 7-8 horas.');
            } else if (sleepHours > 9) {
                bioAge += 1;
                recommendations.push('Sue√±o excesivo. Consulta a un m√©dico si duermes regularmente m√°s de 9h.');
            }

            // Sleep quality
            if (formData.sleepQuality === 'average') {
                bioAge += 1;
                recommendations.push('Mejora tu calidad de sue√±o: rutina regular, habitaci√≥n oscura y fresca.');
            } else if (formData.sleepQuality === 'poor') {
                bioAge += 2.5;
                recommendations.push('Calidad de sue√±o mala. Consulta a un especialista del sue√±o si persiste.');
            }

            // Stress level
            if (formData.stressLevel === 'moderate') {
                bioAge += 1;
                recommendations.push('Estr√©s moderado. Practica la meditaci√≥n, el yoga o la respiraci√≥n profunda.');
            } else if (formData.stressLevel === 'high') {
                bioAge += 3;
                recommendations.push('Estr√©s elevado. Consulta a un profesional y aprende t√©cnicas de gesti√≥n del estr√©s.');
            }

            // Social connections
            if (formData.socialConnections === 'some') {
                bioAge += 0.5;
                recommendations.push('Desarrolla tus conexiones sociales. √önete a clubes o actividades de grupo.');
            } else if (formData.socialConnections === 'few') {
                bioAge += 1.5;
                recommendations.push('Aislamiento social detectado. Las conexiones sociales son esenciales para la salud mental.');
            }

            // Meditation
            if (formData.meditation === 'yes') {
                bioAge -= 1;
            } else {
                recommendations.push('Prueba la meditaci√≥n o ejercicios de relajaci√≥n diarios.');
            }

            // Life satisfaction
            if (formData.lifeSatisfaction === 'medium') {
                bioAge += 0.5;
            } else if (formData.lifeSatisfaction === 'low') {
                bioAge += 2;
                recommendations.push('Satisfacci√≥n con la vida baja. Consulta a un psic√≥logo o coach de vida.');
            }

            // Vegetable servings
            if (formData.vegetableServings === '0-1') {
                bioAge += 2;
                recommendations.push('Consumo de verduras insuficiente. Busca al menos 5 porciones al d√≠a.');
            } else if (formData.vegetableServings === '2-3') {
                bioAge += 0.5;
                recommendations.push('Aumenta tu consumo de verduras a 5 porciones al d√≠a.');
            } else if (formData.vegetableServings === '6+') {
                bioAge -= 0.5;
            }

            // Processed food
            if (formData.processedFood === 'sometimes') {
                bioAge += 1;
                recommendations.push('Reduce los alimentos procesados. Prioriza alimentos frescos y no procesados.');
            } else if (formData.processedFood === 'often') {
                bioAge += 2.5;
                recommendations.push('Consumo excesivo de alimentos procesados. Cocina m√°s en casa.');
            }

            // Water intake
            if (formData.waterIntake === 'insufficient') {
                bioAge += 1.5;
                recommendations.push('Hidrataci√≥n insuficiente. Bebe al menos 1.5-2L de agua al d√≠a.');
            } else if (formData.waterIntake === 'adequate') {
                bioAge += 0;
            } else if (formData.waterIntake === 'excellent') {
                bioAge -= 0.5;
            }

            // Screen time
            const screenTime = parseFloat(formData.screenTime);
            if (screenTime > 6) {
                bioAge += 2;
                recommendations.push('Tiempo de pantalla excesivo. Limita a 4 horas m√°ximo y haz pausas regulares.');
            } else if (screenTime > 4) {
                bioAge += 1;
                recommendations.push('Reduce tu tiempo de pantalla y haz pausas cada hora.');
            }

            // Round biological age
            bioAge = Math.round(bioAge);

            // Ensure we have at least a few recommendations
            if (recommendations.length === 0) {
                recommendations.push('¬°Excelente! Contin√∫a con tus buenos h√°bitos de vida.');
                recommendations.push('Mant√©n una actividad f√≠sica regular.');
                recommendations.push('Conserva una alimentaci√≥n equilibrada y variada.');
            } else if (recommendations.length > 8) {
                // Keep only the most important ones
                recommendations.splice(8);
            }

            currentStepNumber = 4;
            document.getElementById('wizardContent').innerHTML = renderStep4(bioAge, recommendations);
            updateProgress();
            window.scrollTo(0, 0);
        }

        // Render current step
        function renderCurrentStep() {
            const container = document.getElementById('wizardContent');
            if (currentStepNumber === 1) {
                container.innerHTML = renderStep1();
            } else if (currentStepNumber === 2) {
                container.innerHTML = renderStep2();
            } else if (currentStepNumber === 3) {
                container.innerHTML = renderStep3();
            }
        }

        // Initialize on page load
        document.addEventListener('DOMContentLoaded', function() {
            checkCookieConsent();
            renderCurrentStep();
            updateProgress();
        });
    </script>
</body>
</html>
