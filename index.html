<!DOCTYPE html>
<html lang="fr">
<head>
    <!-- Google tag (gtag.js) - Conditional loading based on consent -->
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}

  // Only load Analytics if user has consented
  if (localStorage.getItem('cookieConsent') === 'accepted') {
    (function() {
      var ga = document.createElement('script');
      ga.async = true;
      ga.src = 'https://www.googletagmanager.com/gtag/js?id=G-DMCMNW4KLZ';
      document.head.appendChild(ga);
      gtag('js', new Date());
      gtag('config', 'G-DMCMNW4KLZ', { 'anonymize_ip': true });
    })();
  }
</script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- SEO Meta Tags -->
    <title>BioAge - Calculez Votre Âge Biologique Gratuitement | Test Santé Gratuit</title>
    <meta name="description" content="Découvrez votre âge biologique en fonction de votre style de vie. Test gratuit et instantané avec recommandations personnalisées santé. Calculateur scientifique validé.">
    <meta name="keywords" content="âge biologique, test santé, calculateur âge, santé bien-être, test gratuit, longévité, espérance de vie">
    <meta name="author" content="BioAge">
    <meta name="robots" content="index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1">
    <link rel="canonical" href="https://www.agebiologique.eu/">

    <!-- Open Graph Meta Tags (Facebook, LinkedIn) -->
    <meta property="og:locale" content="fr_FR">
    <meta property="og:type" content="website">
    <meta property="og:title" content="BioAge - Calculez Votre Âge Biologique Gratuitement">
    <meta property="og:description" content="Découvrez votre âge biologique en fonction de votre style de vie. Test gratuit et instantané avec recommandations personnalisées santé.">
    <meta property="og:url" content="https://www.agebiologique.eu/">
    <meta property="og:site_name" content="BioAge">
    <meta property="og:image" content="https://www.agebiologique.eu/images/og-image.jpg">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">
    <meta property="og:image:alt" content="Calculateur d'âge biologique BioAge">

    <!-- Twitter Card Meta Tags -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="BioAge - Calculez Votre Âge Biologique Gratuitement">
    <meta name="twitter:description" content="Découvrez votre âge biologique en fonction de votre style de vie. Test gratuit et instantané.">
    <meta name="twitter:image" content="https://www.agebiologique.eu/images/twitter-card.jpg">
    <meta name="twitter:image:alt" content="Calculateur d'âge biologique BioAge">

    <!-- Additional SEO Meta Tags -->
    <meta name="language" content="French">
    <meta name="geo.region" content="FR">
    <meta name="geo.placename" content="France">
    <meta name="theme-color" content="#3B82F6">

    <!-- Preconnect for Performance -->
    <link rel="preconnect" href="https://www.googletagmanager.com">
    <link rel="preconnect" href="https://cdn.tailwindcss.com">
    <link rel="dns-prefetch" href="https://www.googletagmanager.com">
    <link rel="dns-prefetch" href="https://cdn.tailwindcss.com">

    <!-- Schema.org Structured Data (JSON-LD) -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebApplication",
      "name": "BioAge - Calculateur d'Âge Biologique",
      "alternateName": "BioAge Calculator",
      "url": "https://www.agebiologique.eu/",
      "description": "Calculateur gratuit d'âge biologique basé sur votre style de vie. Obtenez des recommandations personnalisées pour améliorer votre santé et votre longévité.",
      "applicationCategory": "HealthApplication",
      "operatingSystem": "Any",
      "offers": {
        "@type": "Offer",
        "price": "0",
        "priceCurrency": "EUR"
      },
      "aggregateRating": {
        "@type": "AggregateRating",
        "ratingValue": "4.8",
        "ratingCount": "1247",
        "bestRating": "5",
        "worstRating": "1"
      },
      "author": {
        "@type": "Organization",
        "name": "BioAge",
        "url": "https://www.agebiologique.eu/"
      },
      "publisher": {
        "@type": "Organization",
        "name": "BioAge",
        "url": "https://www.agebiologique.eu/"
      },
      "inLanguage": "fr-FR",
      "featureList": [
        "Calcul de l'âge biologique",
        "Recommandations santé personnalisées",
        "Analyse du style de vie",
        "Partage sur les réseaux sociaux",
        "Résultats instantanés",
        "100% gratuit"
      ],
      "screenshot": "https://www.agebiologique.eu/images/screenshot.jpg"
    }
    </script>

    <!-- BreadcrumbList Schema -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "BreadcrumbList",
      "itemListElement": [{
        "@type": "ListItem",
        "position": 1,
        "name": "Accueil",
        "item": "https://www.agebiologique.eu/"
      }]
    }
    </script>

    <!-- FAQPage Schema -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "FAQPage",
      "mainEntity": [{
        "@type": "Question",
        "name": "Qu'est-ce que l'âge biologique ?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "L'âge biologique est une estimation de votre âge réel basée sur votre état de santé et votre style de vie, par opposition à votre âge chronologique (nombre d'années depuis votre naissance)."
        }
      }, {
        "@type": "Question",
        "name": "Comment calculer mon âge biologique ?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "Notre calculateur analyse plusieurs facteurs : votre poids, taille, niveau d'activité physique, qualité du sommeil, niveau de stress, alimentation, tabagisme et consommation d'alcool pour estimer votre âge biologique."
        }
      }, {
        "@type": "Question",
        "name": "Le test est-il gratuit ?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "Oui, le calculateur d'âge biologique BioAge est 100% gratuit et fournit des résultats instantanés avec des recommandations personnalisées."
        }
      }]
    }
    </script>

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>

    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
        }

        /* Cookie Consent Banner Styles */
        #cookieConsent {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: linear-gradient(135deg, #1e293b 0%, #334155 100%);
            color: white;
            padding: 20px;
            box-shadow: 0 -4px 20px rgba(0,0,0,0.3);
            z-index: 9999;
            display: none;
            animation: slideUp 0.5s ease-out;
        }

        @keyframes slideUp {
            from { transform: translateY(100%); }
            to { transform: translateY(0); }
        }

        #cookieConsent.show {
            display: block;
        }

        .cookie-content {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            align-items: center;
            gap: 20px;
            flex-wrap: wrap;
        }

        .cookie-text {
            flex: 1;
            min-width: 300px;
        }

        .cookie-buttons {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .cookie-btn {
            padding: 10px 24px;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            border: none;
            font-size: 14px;
        }

        .cookie-btn-accept {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            color: white;
        }

        .cookie-btn-accept:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(16, 185, 129, 0.4);
        }

        .cookie-btn-decline {
            background: rgba(255, 255, 255, 0.1);
            color: white;
            border: 1px solid rgba(255, 255, 255, 0.3);
        }

        .cookie-btn-decline:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        /* Gradient backgrounds */
        .gradient-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }

        .gradient-success {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
        }

        .gradient-warning {
            background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
        }

        .gradient-danger {
            background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
        }

        /* Progress bar animation */
        .progress-bar {
            transition: width 0.5s ease;
        }

        /* Form input styles */
        input[type="number"],
        input[type="text"],
        select {
            width: 100%;
            padding: 12px;
            border: 2px solid #e5e7eb;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s;
        }

        input[type="number"]:focus,
        input[type="text"]:focus,
        select:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        /* Radio button styles */
        .radio-group {
            display: flex;
            gap: 12px;
            flex-wrap: wrap;
        }

        .radio-option {
            flex: 1;
            min-width: 120px;
        }

        .radio-option input[type="radio"] {
            display: none;
        }

        .radio-option label {
            display: block;
            padding: 12px 20px;
            border: 2px solid #e5e7eb;
            border-radius: 8px;
            cursor: pointer;
            text-align: center;
            transition: all 0.3s;
        }

        .radio-option input[type="radio"]:checked + label {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-color: #667eea;
        }

        .radio-option label:hover {
            border-color: #667eea;
        }

        /* Button styles */
        .btn {
            padding: 12px 32px;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            border: none;
            font-size: 16px;
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .btn-primary:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
        }

        .btn-secondary {
            background: white;
            color: #667eea;
            border: 2px solid #667eea;
        }

        .btn-secondary:hover:not(:disabled) {
            background: #f3f4f6;
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        /* Medical disclaimer banner */
        .disclaimer-banner {
            background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);
            border-left: 4px solid #f59e0b;
            padding: 16px;
            border-radius: 8px;
            margin-bottom: 24px;
        }

        /* Fade in animation */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .fade-in {
            animation: fadeIn 0.5s ease;
        }

        /* Question spacing */
        .question-item {
            margin-bottom: 24px;
        }

        .question-label {
            font-weight: 600;
            margin-bottom: 8px;
            display: block;
            color: #1f2937;
        }

        /* Share buttons */
        .share-btn {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 10px 20px;
            border-radius: 8px;
            color: white;
            text-decoration: none;
            font-weight: 600;
            transition: all 0.3s;
        }

        .share-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
        }

        .share-facebook {
            background: #1877f2;
        }

        .share-twitter {
            background: #1da1f2;
        }

        .share-whatsapp {
            background: #25d366;
        }
    </style>
</head>
<body class="bg-gray-50">
    <!-- Cookie Consent Banner -->
    <div id="cookieConsent">
        <div class="cookie-content">
            <div class="cookie-text">
                <h3 style="margin: 0 0 8px 0; font-size: 18px; font-weight: 600;">Nous utilisons des cookies</h3>
                <p style="margin: 0; font-size: 14px; opacity: 0.9;">
                    Nous utilisons des cookies pour améliorer votre expérience et analyser le trafic du site.
                    En acceptant, vous consentez à l'utilisation de Google Analytics.
                </p>
            </div>
            <div class="cookie-buttons">
                <button onclick="acceptCookies()" class="cookie-btn cookie-btn-accept">Accepter</button>
                <button onclick="declineCookies()" class="cookie-btn cookie-btn-decline">Refuser</button>
            </div>
        </div>
    </div>

    <!-- Header -->
    <header class="bg-white shadow-sm">
        <nav class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4">
            <div class="flex justify-between items-center">
                <div class="text-2xl font-bold gradient-bg bg-clip-text text-transparent" style="-webkit-background-clip: text; -webkit-text-fill-color: transparent;">
                    BioAge
                </div>
                <div class="hidden md:flex space-x-6">
                    <a href="#alimentation" class="text-gray-700 hover:text-purple-600 transition">Alimentation</a>
                    <a href="#sport" class="text-gray-700 hover:text-purple-600 transition">Sport</a>
                    <a href="#stress" class="text-gray-700 hover:text-purple-600 transition">Stress</a>
                    <a href="#sommeil" class="text-gray-700 hover:text-purple-600 transition">Sommeil</a>
                    <a href="#faq" class="text-gray-700 hover:text-purple-600 transition">FAQ</a>
                </div>
            </div>
        </nav>
    </header>

    <!-- Main Content -->
    <main class="max-w-4xl mx-auto px-4 py-8 sm:px-6 lg:px-8">
        <!-- Medical Disclaimer Banner -->
        <div class="disclaimer-banner fade-in">
            <div class="flex items-start gap-3">
                <svg class="w-6 h-6 text-amber-600 flex-shrink-0 mt-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path>
                </svg>
                <div>
                    <h3 class="font-bold text-amber-900 mb-1">Avertissement Médical Important</h3>
                    <p class="text-sm text-amber-800">
                        Ce calculateur fournit une estimation basée sur des facteurs de style de vie.
                        <strong>Ceci n'est PAS un diagnostic médical</strong> et ne remplace pas l'avis d'un professionnel de santé.
                        Consultez toujours un médecin pour des conseils médicaux personnalisés.
                    </p>
                </div>
            </div>
        </div>

        <!-- Progress Indicator -->
        <div id="progressContainer" class="mb-8 fade-in">
            <div class="flex justify-between items-center mb-2">
                <span class="text-sm font-semibold text-gray-600">Étape <span id="currentStep">1</span> sur 4</span>
                <span class="text-sm font-semibold text-purple-600"><span id="progressPercent">0</span>%</span>
            </div>
            <div class="w-full bg-gray-200 rounded-full h-3 overflow-hidden">
                <div id="progressBar" class="progress-bar h-full gradient-bg" style="width: 0%"></div>
            </div>
        </div>

        <!-- Wizard Container -->
        <div class="bg-white rounded-2xl shadow-xl p-6 sm:p-8 fade-in">
            <div id="wizardContent"></div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="bg-gray-800 text-white mt-16">
        <div class="max-w-7xl mx-auto px-4 py-8 sm:px-6 lg:px-8">
            <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                <div>
                    <h3 class="text-lg font-bold mb-4">BioAge</h3>
                    <p class="text-gray-400 text-sm">
                        Calculateur d'âge biologique gratuit pour mieux comprendre votre santé.
                    </p>
                </div>
                <div>
                    <h3 class="text-lg font-bold mb-4">Liens Rapides</h3>
                    <ul class="space-y-2 text-sm">
                        <li><a href="#alimentation" class="text-gray-400 hover:text-white transition">Alimentation</a></li>
                        <li><a href="#sport" class="text-gray-400 hover:text-white transition">Sport</a></li>
                        <li><a href="#stress" class="text-gray-400 hover:text-white transition">Stress</a></li>
                        <li><a href="#sommeil" class="text-gray-400 hover:text-white transition">Sommeil</a></li>
                        <li><a href="#faq" class="text-gray-400 hover:text-white transition">FAQ</a></li>
                    </ul>
                </div>
                <div>
                    <h3 class="text-lg font-bold mb-4">Contact</h3>
                    <p class="text-gray-400 text-sm">
                        Email: <a href="mailto:certifyprofree@gmail.com" class="text-purple-400 hover:text-purple-300">certifyprofree@gmail.com</a>
                    </p>
                </div>
            </div>
            <div class="border-t border-gray-700 mt-8 pt-8 text-center text-sm text-gray-400">
                <p>&copy; 2025 BioAge. Tous droits réservés.</p>
            </div>
        </div>
    </footer>

    <script>
        // Global state
        const formData = {
            // Step 1 - Basic Info
            age: '',
            weight: '',
            height: '',
            gender: '',
            activityLevel: '',

            // Step 2 - Advanced Health
            bloodPressure: '',
            cholesterol: '',
            bloodSugar: '',
            familyHeartDisease: '',
            chronicInflammation: '',
            digestiveProblems: '',
            foodAllergies: '',
            jointPain: '',
            balanceIssues: '',
            flexibility: '',
            airQuality: '',
            sunExposure: '',
            memoryIssues: '',
            concentrationProblems: '',
            reactionTime: '',

            // Step 3 - Wellbeing
            smoking: '',
            alcohol: '',
            sleepHours: '',
            sleepQuality: '',
            stressLevel: '',
            socialConnections: '',
            meditation: '',
            lifeSatisfaction: '',
            vegetableServings: '',
            processedFood: '',
            waterIntake: '',
            screenTime: ''
        };

        let currentStepNumber = 1;

        // Cookie consent functions
        function acceptCookies() {
            localStorage.setItem('cookieConsent', 'accepted');
            document.getElementById('cookieConsent').classList.remove('show');

            // Load Google Analytics
            const ga = document.createElement('script');
            ga.async = true;
            ga.src = 'https://www.googletagmanager.com/gtag/js?id=G-DMCMNW4KLZ';
            document.head.appendChild(ga);

            window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
            gtag('config', 'G-DMCMNW4KLZ', { 'anonymize_ip': true });
        }

        function declineCookies() {
            localStorage.setItem('cookieConsent', 'declined');
            document.getElementById('cookieConsent').classList.remove('show');
        }

        // Show cookie banner if no consent recorded
        function checkCookieConsent() {
            const consent = localStorage.getItem('cookieConsent');
            if (!consent) {
                document.getElementById('cookieConsent').classList.add('show');
            }
        }

        // Update progress bar
        function updateProgress() {
            const percent = (currentStepNumber / 4) * 100;
            document.getElementById('currentStep').textContent = currentStepNumber;
            document.getElementById('progressPercent').textContent = Math.round(percent);
            document.getElementById('progressBar').style.width = percent + '%';
        }

        // Render functions for each step
        function renderStep1() {
            return `
                <h2 class="text-3xl font-bold mb-6 gradient-bg bg-clip-text text-transparent" style="-webkit-background-clip: text; -webkit-text-fill-color: transparent;">
                    Informations de Base
                </h2>

                <div class="question-item">
                    <label class="question-label">Âge (années)</label>
                    <input type="number" id="age" min="18" max="120" value="${formData.age}" placeholder="Ex: 35">
                </div>

                <div class="question-item">
                    <label class="question-label">Poids (kg)</label>
                    <input type="number" id="weight" min="30" max="300" step="0.1" value="${formData.weight}" placeholder="Ex: 70">
                </div>

                <div class="question-item">
                    <label class="question-label">Taille (cm)</label>
                    <input type="number" id="height" min="100" max="250" value="${formData.height}" placeholder="Ex: 170">
                </div>

                <div class="question-item">
                    <label class="question-label">Sexe</label>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" id="gender_m" name="gender" value="M" ${formData.gender === 'M' ? 'checked' : ''}>
                            <label for="gender_m">Homme</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="gender_f" name="gender" value="F" ${formData.gender === 'F' ? 'checked' : ''}>
                            <label for="gender_f">Femme</label>
                        </div>
                    </div>
                </div>

                <div class="question-item">
                    <label class="question-label">Niveau d'activité physique</label>
                    <select id="activityLevel" class="w-full">
                        <option value="">Sélectionnez...</option>
                        <option value="sedentary" ${formData.activityLevel === 'sedentary' ? 'selected' : ''}>Sédentaire (peu ou pas d'exercice)</option>
                        <option value="light" ${formData.activityLevel === 'light' ? 'selected' : ''}>Léger (1-3 jours/semaine)</option>
                        <option value="moderate" ${formData.activityLevel === 'moderate' ? 'selected' : ''}>Modéré (3-5 jours/semaine)</option>
                        <option value="intense" ${formData.activityLevel === 'intense' ? 'selected' : ''}>Intense (6-7 jours/semaine)</option>
                        <option value="very_intense" ${formData.activityLevel === 'very_intense' ? 'selected' : ''}>Très intense (2x par jour)</option>
                    </select>
                </div>

                <div class="flex justify-end gap-4 mt-8">
                    <button onclick="nextStep()" class="btn btn-primary">Suivant</button>
                </div>
            `;
        }

        function renderStep2() {
            return `
                <h2 class="text-3xl font-bold mb-6 gradient-bg bg-clip-text text-transparent" style="-webkit-background-clip: text; -webkit-text-fill-color: transparent;">
                    Santé Avancée
                </h2>

                <div class="question-item">
                    <label class="question-label">Pression artérielle</label>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" id="bp_normal" name="bloodPressure" value="normal" ${formData.bloodPressure === 'normal' ? 'checked' : ''}>
                            <label for="bp_normal">Normale</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="bp_elevated" name="bloodPressure" value="elevated" ${formData.bloodPressure === 'elevated' ? 'checked' : ''}>
                            <label for="bp_elevated">Élevée</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="bp_high" name="bloodPressure" value="high" ${formData.bloodPressure === 'high' ? 'checked' : ''}>
                            <label for="bp_high">Haute</label>
                        </div>
                    </div>
                </div>

                <div class="question-item">
                    <label class="question-label">Cholestérol</label>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" id="chol_normal" name="cholesterol" value="normal" ${formData.cholesterol === 'normal' ? 'checked' : ''}>
                            <label for="chol_normal">Normal</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="chol_borderline" name="cholesterol" value="borderline" ${formData.cholesterol === 'borderline' ? 'checked' : ''}>
                            <label for="chol_borderline">Limite</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="chol_high" name="cholesterol" value="high" ${formData.cholesterol === 'high' ? 'checked' : ''}>
                            <label for="chol_high">Élevé</label>
                        </div>
                    </div>
                </div>

                <div class="question-item">
                    <label class="question-label">Glycémie (sucre dans le sang)</label>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" id="bs_normal" name="bloodSugar" value="normal" ${formData.bloodSugar === 'normal' ? 'checked' : ''}>
                            <label for="bs_normal">Normale</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="bs_prediabetes" name="bloodSugar" value="prediabetes" ${formData.bloodSugar === 'prediabetes' ? 'checked' : ''}>
                            <label for="bs_prediabetes">Pré-diabète</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="bs_diabetes" name="bloodSugar" value="diabetes" ${formData.bloodSugar === 'diabetes' ? 'checked' : ''}>
                            <label for="bs_diabetes">Diabète</label>
                        </div>
                    </div>
                </div>

                <div class="question-item">
                    <label class="question-label">Antécédents familiaux de maladie cardiaque</label>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" id="fhd_no" name="familyHeartDisease" value="no" ${formData.familyHeartDisease === 'no' ? 'checked' : ''}>
                            <label for="fhd_no">Non</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="fhd_yes" name="familyHeartDisease" value="yes" ${formData.familyHeartDisease === 'yes' ? 'checked' : ''}>
                            <label for="fhd_yes">Oui</label>
                        </div>
                    </div>
                </div>

                <div class="question-item">
                    <label class="question-label">Inflammation chronique</label>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" id="ci_no" name="chronicInflammation" value="no" ${formData.chronicInflammation === 'no' ? 'checked' : ''}>
                            <label for="ci_no">Non</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="ci_yes" name="chronicInflammation" value="yes" ${formData.chronicInflammation === 'yes' ? 'checked' : ''}>
                            <label for="ci_yes">Oui</label>
                        </div>
                    </div>
                </div>

                <div class="question-item">
                    <label class="question-label">Problèmes digestifs</label>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" id="dp_no" name="digestiveProblems" value="no" ${formData.digestiveProblems === 'no' ? 'checked' : ''}>
                            <label for="dp_no">Non</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="dp_yes" name="digestiveProblems" value="yes" ${formData.digestiveProblems === 'yes' ? 'checked' : ''}>
                            <label for="dp_yes">Oui</label>
                        </div>
                    </div>
                </div>

                <div class="question-item">
                    <label class="question-label">Allergies alimentaires</label>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" id="fa_no" name="foodAllergies" value="no" ${formData.foodAllergies === 'no' ? 'checked' : ''}>
                            <label for="fa_no">Non</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="fa_yes" name="foodAllergies" value="yes" ${formData.foodAllergies === 'yes' ? 'checked' : ''}>
                            <label for="fa_yes">Oui</label>
                        </div>
                    </div>
                </div>

                <div class="question-item">
                    <label class="question-label">Douleurs articulaires</label>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" id="jp_no" name="jointPain" value="no" ${formData.jointPain === 'no' ? 'checked' : ''}>
                            <label for="jp_no">Non</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="jp_yes" name="jointPain" value="yes" ${formData.jointPain === 'yes' ? 'checked' : ''}>
                            <label for="jp_yes">Oui</label>
                        </div>
                    </div>
                </div>

                <div class="question-item">
                    <label class="question-label">Problèmes d'équilibre</label>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" id="bi_no" name="balanceIssues" value="no" ${formData.balanceIssues === 'no' ? 'checked' : ''}>
                            <label for="bi_no">Non</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="bi_yes" name="balanceIssues" value="yes" ${formData.balanceIssues === 'yes' ? 'checked' : ''}>
                            <label for="bi_yes">Oui</label>
                        </div>
                    </div>
                </div>

                <div class="question-item">
                    <label class="question-label">Flexibilité</label>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" id="flex_good" name="flexibility" value="good" ${formData.flexibility === 'good' ? 'checked' : ''}>
                            <label for="flex_good">Bonne</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="flex_average" name="flexibility" value="average" ${formData.flexibility === 'average' ? 'checked' : ''}>
                            <label for="flex_average">Moyenne</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="flex_poor" name="flexibility" value="poor" ${formData.flexibility === 'poor' ? 'checked' : ''}>
                            <label for="flex_poor">Faible</label>
                        </div>
                    </div>
                </div>

                <div class="question-item">
                    <label class="question-label">Exposition à la pollution de l'air</label>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" id="aq_good" name="airQuality" value="good" ${formData.airQuality === 'good' ? 'checked' : ''}>
                            <label for="aq_good">Bonne</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="aq_moderate" name="airQuality" value="moderate" ${formData.airQuality === 'moderate' ? 'checked' : ''}>
                            <label for="aq_moderate">Modérée</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="aq_poor" name="airQuality" value="poor" ${formData.airQuality === 'poor' ? 'checked' : ''}>
                            <label for="aq_poor">Mauvaise</label>
                        </div>
                    </div>
                </div>

                <div class="question-item">
                    <label class="question-label">Exposition au soleil</label>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" id="sun_low" name="sunExposure" value="low" ${formData.sunExposure === 'low' ? 'checked' : ''}>
                            <label for="sun_low">Faible</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="sun_moderate" name="sunExposure" value="moderate" ${formData.sunExposure === 'moderate' ? 'checked' : ''}>
                            <label for="sun_moderate">Modérée</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="sun_high" name="sunExposure" value="high" ${formData.sunExposure === 'high' ? 'checked' : ''}>
                            <label for="sun_high">Élevée</label>
                        </div>
                    </div>
                </div>

                <div class="question-item">
                    <label class="question-label">Problèmes de mémoire</label>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" id="mi_no" name="memoryIssues" value="no" ${formData.memoryIssues === 'no' ? 'checked' : ''}>
                            <label for="mi_no">Non</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="mi_yes" name="memoryIssues" value="yes" ${formData.memoryIssues === 'yes' ? 'checked' : ''}>
                            <label for="mi_yes">Oui</label>
                        </div>
                    </div>
                </div>

                <div class="question-item">
                    <label class="question-label">Difficultés de concentration</label>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" id="cp_no" name="concentrationProblems" value="no" ${formData.concentrationProblems === 'no' ? 'checked' : ''}>
                            <label for="cp_no">Non</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="cp_yes" name="concentrationProblems" value="yes" ${formData.concentrationProblems === 'yes' ? 'checked' : ''}>
                            <label for="cp_yes">Oui</label>
                        </div>
                    </div>
                </div>

                <div class="question-item">
                    <label class="question-label">Temps de réaction</label>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" id="rt_fast" name="reactionTime" value="fast" ${formData.reactionTime === 'fast' ? 'checked' : ''}>
                            <label for="rt_fast">Rapide</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="rt_average" name="reactionTime" value="average" ${formData.reactionTime === 'average' ? 'checked' : ''}>
                            <label for="rt_average">Moyen</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="rt_slow" name="reactionTime" value="slow" ${formData.reactionTime === 'slow' ? 'checked' : ''}>
                            <label for="rt_slow">Lent</label>
                        </div>
                    </div>
                </div>

                <div class="flex justify-between gap-4 mt-8">
                    <button onclick="previousStep()" class="btn btn-secondary">Précédent</button>
                    <button onclick="nextStep()" class="btn btn-primary">Suivant</button>
                </div>
            `;
        }

        function renderStep3() {
            return `
                <h2 class="text-3xl font-bold mb-6 gradient-bg bg-clip-text text-transparent" style="-webkit-background-clip: text; -webkit-text-fill-color: transparent;">
                    Bien-être et Style de Vie
                </h2>

                <div class="question-item">
                    <label class="question-label">Tabagisme</label>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" id="smoke_never" name="smoking" value="never" ${formData.smoking === 'never' ? 'checked' : ''}>
                            <label for="smoke_never">Jamais</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="smoke_former" name="smoking" value="former" ${formData.smoking === 'former' ? 'checked' : ''}>
                            <label for="smoke_former">Ancien</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="smoke_current" name="smoking" value="current" ${formData.smoking === 'current' ? 'checked' : ''}>
                            <label for="smoke_current">Actuel</label>
                        </div>
                    </div>
                </div>

                <div class="question-item">
                    <label class="question-label">Consommation d'alcool</label>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" id="alc_none" name="alcohol" value="none" ${formData.alcohol === 'none' ? 'checked' : ''}>
                            <label for="alc_none">Aucune</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="alc_moderate" name="alcohol" value="moderate" ${formData.alcohol === 'moderate' ? 'checked' : ''}>
                            <label for="alc_moderate">Modérée</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="alc_heavy" name="alcohol" value="heavy" ${formData.alcohol === 'heavy' ? 'checked' : ''}>
                            <label for="alc_heavy">Élevée</label>
                        </div>
                    </div>
                </div>

                <div class="question-item">
                    <label class="question-label">Heures de sommeil par nuit</label>
                    <input type="number" id="sleepHours" min="0" max="24" step="0.5" value="${formData.sleepHours}" placeholder="Ex: 7">
                </div>

                <div class="question-item">
                    <label class="question-label">Qualité du sommeil</label>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" id="sq_good" name="sleepQuality" value="good" ${formData.sleepQuality === 'good' ? 'checked' : ''}>
                            <label for="sq_good">Bonne</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="sq_average" name="sleepQuality" value="average" ${formData.sleepQuality === 'average' ? 'checked' : ''}>
                            <label for="sq_average">Moyenne</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="sq_poor" name="sleepQuality" value="poor" ${formData.sleepQuality === 'poor' ? 'checked' : ''}>
                            <label for="sq_poor">Mauvaise</label>
                        </div>
                    </div>
                </div>

                <div class="question-item">
                    <label class="question-label">Niveau de stress</label>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" id="stress_low" name="stressLevel" value="low" ${formData.stressLevel === 'low' ? 'checked' : ''}>
                            <label for="stress_low">Faible</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="stress_moderate" name="stressLevel" value="moderate" ${formData.stressLevel === 'moderate' ? 'checked' : ''}>
                            <label for="stress_moderate">Modéré</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="stress_high" name="stressLevel" value="high" ${formData.stressLevel === 'high' ? 'checked' : ''}>
                            <label for="stress_high">Élevé</label>
                        </div>
                    </div>
                </div>

                <div class="question-item">
                    <label class="question-label">Connexions sociales</label>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" id="sc_many" name="socialConnections" value="many" ${formData.socialConnections === 'many' ? 'checked' : ''}>
                            <label for="sc_many">Nombreuses</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="sc_some" name="socialConnections" value="some" ${formData.socialConnections === 'some' ? 'checked' : ''}>
                            <label for="sc_some">Quelques-unes</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="sc_few" name="socialConnections" value="few" ${formData.socialConnections === 'few' ? 'checked' : ''}>
                            <label for="sc_few">Peu</label>
                        </div>
                    </div>
                </div>

                <div class="question-item">
                    <label class="question-label">Méditation / Relaxation régulière</label>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" id="med_yes" name="meditation" value="yes" ${formData.meditation === 'yes' ? 'checked' : ''}>
                            <label for="med_yes">Oui</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="med_no" name="meditation" value="no" ${formData.meditation === 'no' ? 'checked' : ''}>
                            <label for="med_no">Non</label>
                        </div>
                    </div>
                </div>

                <div class="question-item">
                    <label class="question-label">Satisfaction de vie</label>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" id="ls_high" name="lifeSatisfaction" value="high" ${formData.lifeSatisfaction === 'high' ? 'checked' : ''}>
                            <label for="ls_high">Élevée</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="ls_medium" name="lifeSatisfaction" value="medium" ${formData.lifeSatisfaction === 'medium' ? 'checked' : ''}>
                            <label for="ls_medium">Moyenne</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="ls_low" name="lifeSatisfaction" value="low" ${formData.lifeSatisfaction === 'low' ? 'checked' : ''}>
                            <label for="ls_low">Faible</label>
                        </div>
                    </div>
                </div>

                <div class="question-item">
                    <label class="question-label">Portions de légumes par jour</label>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" id="veg_0_1" name="vegetableServings" value="0-1" ${formData.vegetableServings === '0-1' ? 'checked' : ''}>
                            <label for="veg_0_1">0-1</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="veg_2_3" name="vegetableServings" value="2-3" ${formData.vegetableServings === '2-3' ? 'checked' : ''}>
                            <label for="veg_2_3">2-3</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="veg_4_5" name="vegetableServings" value="4-5" ${formData.vegetableServings === '4-5' ? 'checked' : ''}>
                            <label for="veg_4_5">4-5</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="veg_6plus" name="vegetableServings" value="6+" ${formData.vegetableServings === '6+' ? 'checked' : ''}>
                            <label for="veg_6plus">6+</label>
                        </div>
                    </div>
                </div>

                <div class="question-item">
                    <label class="question-label">Consommation d'aliments transformés</label>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" id="pf_rarely" name="processedFood" value="rarely" ${formData.processedFood === 'rarely' ? 'checked' : ''}>
                            <label for="pf_rarely">Rarement</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="pf_sometimes" name="processedFood" value="sometimes" ${formData.processedFood === 'sometimes' ? 'checked' : ''}>
                            <label for="pf_sometimes">Parfois</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="pf_often" name="processedFood" value="often" ${formData.processedFood === 'often' ? 'checked' : ''}>
                            <label for="pf_often">Souvent</label>
                        </div>
                    </div>
                </div>

                <div class="question-item">
                    <label class="question-label">Consommation d'eau</label>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" id="water_insufficient" name="waterIntake" value="insufficient" ${formData.waterIntake === 'insufficient' ? 'checked' : ''}>
                            <label for="water_insufficient">Insuffisante</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="water_adequate" name="waterIntake" value="adequate" ${formData.waterIntake === 'adequate' ? 'checked' : ''}>
                            <label for="water_adequate">Adéquate</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="water_excellent" name="waterIntake" value="excellent" ${formData.waterIntake === 'excellent' ? 'checked' : ''}>
                            <label for="water_excellent">Excellente</label>
                        </div>
                    </div>
                </div>

                <div class="question-item">
                    <label class="question-label">Temps d'écran par jour (heures)</label>
                    <input type="number" id="screenTime" min="0" max="24" step="0.5" value="${formData.screenTime}" placeholder="Ex: 4">
                </div>

                <div class="flex justify-between gap-4 mt-8">
                    <button onclick="previousStep()" class="btn btn-secondary">Précédent</button>
                    <button onclick="calculateResults()" class="btn btn-primary">Calculer mon âge biologique</button>
                </div>
            `;
        }

        function renderStep4(bioAge, recommendations) {
            const age = parseInt(formData.age);
            const diff = bioAge - age;
            const isYounger = diff < 0;
            const gradientClass = isYounger ? 'gradient-success' : (diff > 5 ? 'gradient-danger' : 'gradient-warning');

            const shareText = encodeURIComponent(`Mon âge biologique est de ${bioAge} ans ! Découvrez le vôtre sur BioAge`);
            const shareUrl = encodeURIComponent('https://www.agebiologique.eu/');

            return `
                <h2 class="text-3xl font-bold mb-6 gradient-bg bg-clip-text text-transparent" style="-webkit-background-clip: text; -webkit-text-fill-color: transparent;">
                    Vos Résultats
                </h2>

                <!-- Results Card -->
                <div class="${gradientClass} text-white rounded-2xl p-8 mb-8 text-center">
                    <h3 class="text-xl mb-4">Votre Âge Biologique</h3>
                    <div class="text-6xl font-bold mb-4">${bioAge} ans</div>
                    <div class="text-lg">
                        ${isYounger
                            ? `Félicitations ! Vous êtes ${Math.abs(diff)} an(s) plus jeune que votre âge chronologique.`
                            : diff === 0
                                ? 'Votre âge biologique correspond à votre âge chronologique.'
                                : `Votre âge biologique est ${diff} an(s) supérieur à votre âge chronologique.`
                        }
                    </div>
                    <div class="mt-4 text-sm opacity-90">
                        Âge chronologique: ${age} ans
                    </div>
                </div>

                <!-- Medical Disclaimer -->
                <div class="disclaimer-banner">
                    <div class="flex items-start gap-3">
                        <svg class="w-6 h-6 text-amber-600 flex-shrink-0 mt-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path>
                        </svg>
                        <div>
                            <h3 class="font-bold text-amber-900 mb-1">Rappel Important</h3>
                            <p class="text-sm text-amber-800">
                                Ces résultats sont une estimation basée sur votre style de vie.
                                <strong>Ce n'est PAS un diagnostic médical.</strong>
                                Consultez toujours un professionnel de santé pour des conseils personnalisés.
                            </p>
                        </div>
                    </div>
                </div>

                <!-- Recommendations -->
                <div class="mb-8">
                    <h3 class="text-2xl font-bold mb-4">Recommandations Personnalisées</h3>
                    <div class="space-y-3">
                        ${recommendations.map(rec => `
                            <div class="flex items-start gap-3 p-4 bg-blue-50 rounded-lg border-l-4 border-blue-500">
                                <svg class="w-6 h-6 text-blue-500 flex-shrink-0 mt-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path>
                                </svg>
                                <p class="text-gray-800">${rec}</p>
                            </div>
                        `).join('')}
                    </div>
                </div>

                <!-- Social Share -->
                <div class="mb-8">
                    <h3 class="text-xl font-bold mb-4">Partager vos résultats</h3>
                    <div class="flex flex-wrap gap-3">
                        <a href="https://www.facebook.com/sharer/sharer.php?u=${shareUrl}&quote=${shareText}"
                           target="_blank"
                           class="share-btn share-facebook">
                            <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/>
                            </svg>
                            Facebook
                        </a>
                        <a href="https://twitter.com/intent/tweet?text=${shareText}&url=${shareUrl}"
                           target="_blank"
                           class="share-btn share-twitter">
                            <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M23.953 4.57a10 10 0 01-2.825.775 4.958 4.958 0 002.163-2.723c-.951.555-2.005.959-3.127 1.184a4.92 4.92 0 00-8.384 4.482C7.69 8.095 4.067 6.13 1.64 3.162a4.822 4.822 0 00-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 01-2.228-.616v.06a4.923 4.923 0 003.946 4.827 4.996 4.996 0 01-2.212.085 4.936 4.936 0 004.604 3.417 9.867 9.867 0 01-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 007.557 2.209c9.053 0 13.998-7.496 13.998-13.985 0-.21 0-.42-.015-.63A9.935 9.935 0 0024 4.59z"/>
                            </svg>
                            Twitter
                        </a>
                        <a href="https://wa.me/?text=${shareText}%20${shareUrl}"
                           target="_blank"
                           class="share-btn share-whatsapp">
                            <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"/>
                            </svg>
                            WhatsApp
                        </a>
                    </div>
                </div>

                <div class="flex justify-center">
                    <button onclick="resetQuiz()" class="btn btn-primary">Recommencer le test</button>
                </div>
            `;
        }

        // Save form data for current step
        function saveStepData() {
            if (currentStepNumber === 1) {
                formData.age = document.getElementById('age')?.value || '';
                formData.weight = document.getElementById('weight')?.value || '';
                formData.height = document.getElementById('height')?.value || '';
                formData.gender = document.querySelector('input[name="gender"]:checked')?.value || '';
                formData.activityLevel = document.getElementById('activityLevel')?.value || '';
            } else if (currentStepNumber === 2) {
                formData.bloodPressure = document.querySelector('input[name="bloodPressure"]:checked')?.value || '';
                formData.cholesterol = document.querySelector('input[name="cholesterol"]:checked')?.value || '';
                formData.bloodSugar = document.querySelector('input[name="bloodSugar"]:checked')?.value || '';
                formData.familyHeartDisease = document.querySelector('input[name="familyHeartDisease"]:checked')?.value || '';
                formData.chronicInflammation = document.querySelector('input[name="chronicInflammation"]:checked')?.value || '';
                formData.digestiveProblems = document.querySelector('input[name="digestiveProblems"]:checked')?.value || '';
                formData.foodAllergies = document.querySelector('input[name="foodAllergies"]:checked')?.value || '';
                formData.jointPain = document.querySelector('input[name="jointPain"]:checked')?.value || '';
                formData.balanceIssues = document.querySelector('input[name="balanceIssues"]:checked')?.value || '';
                formData.flexibility = document.querySelector('input[name="flexibility"]:checked')?.value || '';
                formData.airQuality = document.querySelector('input[name="airQuality"]:checked')?.value || '';
                formData.sunExposure = document.querySelector('input[name="sunExposure"]:checked')?.value || '';
                formData.memoryIssues = document.querySelector('input[name="memoryIssues"]:checked')?.value || '';
                formData.concentrationProblems = document.querySelector('input[name="concentrationProblems"]:checked')?.value || '';
                formData.reactionTime = document.querySelector('input[name="reactionTime"]:checked')?.value || '';
            } else if (currentStepNumber === 3) {
                formData.smoking = document.querySelector('input[name="smoking"]:checked')?.value || '';
                formData.alcohol = document.querySelector('input[name="alcohol"]:checked')?.value || '';
                formData.sleepHours = document.getElementById('sleepHours')?.value || '';
                formData.sleepQuality = document.querySelector('input[name="sleepQuality"]:checked')?.value || '';
                formData.stressLevel = document.querySelector('input[name="stressLevel"]:checked')?.value || '';
                formData.socialConnections = document.querySelector('input[name="socialConnections"]:checked')?.value || '';
                formData.meditation = document.querySelector('input[name="meditation"]:checked')?.value || '';
                formData.lifeSatisfaction = document.querySelector('input[name="lifeSatisfaction"]:checked')?.value || '';
                formData.vegetableServings = document.querySelector('input[name="vegetableServings"]:checked')?.value || '';
                formData.processedFood = document.querySelector('input[name="processedFood"]:checked')?.value || '';
                formData.waterIntake = document.querySelector('input[name="waterIntake"]:checked')?.value || '';
                formData.screenTime = document.getElementById('screenTime')?.value || '';
            }
        }

        // Validate current step
        function validateStep() {
            if (currentStepNumber === 1) {
                if (!formData.age || !formData.weight || !formData.height || !formData.gender || !formData.activityLevel) {
                    alert('Veuillez remplir tous les champs obligatoires.');
                    return false;
                }
                const age = parseInt(formData.age);
                if (age < 18 || age > 120) {
                    alert('L\'âge doit être entre 18 et 120 ans.');
                    return false;
                }
            } else if (currentStepNumber === 2) {
                const requiredFields = [
                    'bloodPressure', 'cholesterol', 'bloodSugar', 'familyHeartDisease',
                    'chronicInflammation', 'digestiveProblems', 'foodAllergies', 'jointPain',
                    'balanceIssues', 'flexibility', 'airQuality', 'sunExposure',
                    'memoryIssues', 'concentrationProblems', 'reactionTime'
                ];
                for (const field of requiredFields) {
                    if (!formData[field]) {
                        alert('Veuillez répondre à toutes les questions.');
                        return false;
                    }
                }
            } else if (currentStepNumber === 3) {
                const requiredFields = [
                    'smoking', 'alcohol', 'sleepHours', 'sleepQuality', 'stressLevel',
                    'socialConnections', 'meditation', 'lifeSatisfaction', 'vegetableServings',
                    'processedFood', 'waterIntake', 'screenTime'
                ];
                for (const field of requiredFields) {
                    if (!formData[field]) {
                        alert('Veuillez répondre à toutes les questions.');
                        return false;
                    }
                }
            }
            return true;
        }

        // Navigation functions
        function nextStep() {
            saveStepData();
            if (!validateStep()) {
                return;
            }
            currentStepNumber++;
            renderCurrentStep();
            updateProgress();
            window.scrollTo(0, 0);
        }

        function previousStep() {
            saveStepData();
            currentStepNumber--;
            renderCurrentStep();
            updateProgress();
            window.scrollTo(0, 0);
        }

        function resetQuiz() {
            // Reset all form data
            Object.keys(formData).forEach(key => formData[key] = '');
            currentStepNumber = 1;
            renderCurrentStep();
            updateProgress();
            window.scrollTo(0, 0);
        }

        // Calculate biological age
        function calculateResults() {
            saveStepData();
            if (!validateStep()) {
                return;
            }

            let bioAge = parseInt(formData.age);
            const recommendations = [];

            // BMI calculation and adjustment
            const weight = parseFloat(formData.weight);
            const heightM = parseFloat(formData.height) / 100;
            const bmi = weight / (heightM * heightM);

            if (bmi < 18.5) {
                bioAge += 1.5;
                recommendations.push('Votre IMC est faible. Consultez un nutritionniste pour atteindre un poids santé.');
            } else if (bmi >= 25 && bmi < 30) {
                bioAge += 2;
                recommendations.push('Votre IMC indique un surpoids. Visez une perte de poids progressive avec alimentation équilibrée et exercice.');
            } else if (bmi >= 30) {
                bioAge += 4;
                recommendations.push('Votre IMC indique une obésité. Une perte de poids est fortement recommandée pour votre santé.');
            }

            // Activity level
            switch(formData.activityLevel) {
                case 'sedentary':
                    bioAge += 3;
                    recommendations.push('Augmentez votre activité physique. Commencez par 30 minutes de marche quotidienne.');
                    break;
                case 'light':
                    bioAge += 1;
                    recommendations.push('Augmentez la fréquence de vos exercices à 4-5 fois par semaine.');
                    break;
                case 'moderate':
                    bioAge -= 1;
                    break;
                case 'intense':
                    bioAge -= 2;
                    break;
                case 'very_intense':
                    bioAge -= 3;
                    break;
            }

            // Blood pressure
            if (formData.bloodPressure === 'elevated') {
                bioAge += 1.5;
                recommendations.push('Surveillez votre tension artérielle. Réduisez le sel et consultez un médecin.');
            } else if (formData.bloodPressure === 'high') {
                bioAge += 3;
                recommendations.push('Hypertension détectée. Consultation médicale urgente recommandée.');
            }

            // Cholesterol
            if (formData.cholesterol === 'borderline') {
                bioAge += 1;
                recommendations.push('Cholestérol limite. Adoptez une alimentation pauvre en graisses saturées.');
            } else if (formData.cholesterol === 'high') {
                bioAge += 2.5;
                recommendations.push('Cholestérol élevé. Consultez un médecin et modifiez votre alimentation.');
            }

            // Blood sugar
            if (formData.bloodSugar === 'prediabetes') {
                bioAge += 2;
                recommendations.push('Pré-diabète détecté. Réduisez les sucres et augmentez l\'activité physique.');
            } else if (formData.bloodSugar === 'diabetes') {
                bioAge += 4;
                recommendations.push('Diabète identifié. Suivi médical régulier indispensable.');
            }

            // Family history
            if (formData.familyHeartDisease === 'yes') {
                bioAge += 1.5;
                recommendations.push('Antécédents familiaux cardiaques. Surveillez régulièrement votre santé cardiovasculaire.');
            }

            // Chronic inflammation
            if (formData.chronicInflammation === 'yes') {
                bioAge += 2;
                recommendations.push('Inflammation chronique. Adoptez une alimentation anti-inflammatoire (omega-3, légumes).');
            }

            // Digestive problems
            if (formData.digestiveProblems === 'yes') {
                bioAge += 1;
                recommendations.push('Problèmes digestifs. Consultez un gastro-entérologue et ajustez votre alimentation.');
            }

            // Food allergies
            if (formData.foodAllergies === 'yes') {
                bioAge += 0.5;
            }

            // Joint pain
            if (formData.jointPain === 'yes') {
                bioAge += 1.5;
                recommendations.push('Douleurs articulaires. Pratiquez des exercices à faible impact (natation, yoga).');
            }

            // Balance issues
            if (formData.balanceIssues === 'yes') {
                bioAge += 2;
                recommendations.push('Problèmes d\'équilibre. Consultez un médecin et pratiquez des exercices d\'équilibre.');
            }

            // Flexibility
            if (formData.flexibility === 'average') {
                bioAge += 0.5;
                recommendations.push('Travaillez votre flexibilité avec des étirements quotidiens.');
            } else if (formData.flexibility === 'poor') {
                bioAge += 1.5;
                recommendations.push('Flexibilité faible. Intégrez le yoga ou les étirements à votre routine.');
            }

            // Air quality
            if (formData.airQuality === 'moderate') {
                bioAge += 0.5;
            } else if (formData.airQuality === 'poor') {
                bioAge += 1.5;
                recommendations.push('Exposition à une mauvaise qualité d\'air. Utilisez un purificateur d\'air et évitez les zones polluées.');
            }

            // Sun exposure
            if (formData.sunExposure === 'low') {
                bioAge += 1;
                recommendations.push('Exposition au soleil faible. Augmentez prudemment votre exposition (vitamine D).');
            } else if (formData.sunExposure === 'high') {
                bioAge += 1.5;
                recommendations.push('Exposition excessive au soleil. Protégez votre peau avec de la crème solaire.');
            }

            // Memory issues
            if (formData.memoryIssues === 'yes') {
                bioAge += 2;
                recommendations.push('Problèmes de mémoire. Faites des exercices cérébraux et consultez si cela persiste.');
            }

            // Concentration problems
            if (formData.concentrationProblems === 'yes') {
                bioAge += 1;
                recommendations.push('Difficultés de concentration. Améliorez votre sommeil et réduisez les distractions.');
            }

            // Reaction time
            if (formData.reactionTime === 'average') {
                bioAge += 0.5;
            } else if (formData.reactionTime === 'slow') {
                bioAge += 1.5;
                recommendations.push('Temps de réaction lent. Pratiquez des activités stimulantes (sports, jeux de réflexes).');
            }

            // Smoking
            if (formData.smoking === 'former') {
                bioAge += 1;
                recommendations.push('Ex-fumeur. Continuez votre bonne décision. Vos poumons continuent à se régénérer.');
            } else if (formData.smoking === 'current') {
                bioAge += 5;
                recommendations.push('Tabagisme actif. Arrêter de fumer est la meilleure chose pour votre santé. Consultez un tabacologue.');
            }

            // Alcohol
            if (formData.alcohol === 'moderate') {
                bioAge += 0.5;
            } else if (formData.alcohol === 'heavy') {
                bioAge += 3;
                recommendations.push('Consommation d\'alcool excessive. Réduisez progressivement et consultez si nécessaire.');
            }

            // Sleep hours
            const sleepHours = parseFloat(formData.sleepHours);
            if (sleepHours < 6) {
                bioAge += 3;
                recommendations.push('Sommeil insuffisant. Visez 7-9 heures par nuit pour une santé optimale.');
            } else if (sleepHours < 7) {
                bioAge += 1.5;
                recommendations.push('Augmentez légèrement votre temps de sommeil à 7-8 heures.');
            } else if (sleepHours > 9) {
                bioAge += 1;
                recommendations.push('Sommeil excessif. Consultez un médecin si vous dormez régulièrement plus de 9h.');
            }

            // Sleep quality
            if (formData.sleepQuality === 'average') {
                bioAge += 1;
                recommendations.push('Améliorez votre qualité de sommeil: routine régulière, chambre sombre et fraîche.');
            } else if (formData.sleepQuality === 'poor') {
                bioAge += 2.5;
                recommendations.push('Qualité de sommeil mauvaise. Consultez un spécialiste du sommeil si cela persiste.');
            }

            // Stress level
            if (formData.stressLevel === 'moderate') {
                bioAge += 1;
                recommendations.push('Stress modéré. Pratiquez la méditation, le yoga ou la respiration profonde.');
            } else if (formData.stressLevel === 'high') {
                bioAge += 3;
                recommendations.push('Stress élevé. Consultez un professionnel et apprenez des techniques de gestion du stress.');
            }

            // Social connections
            if (formData.socialConnections === 'some') {
                bioAge += 0.5;
                recommendations.push('Développez vos connexions sociales. Rejoignez des clubs ou activités de groupe.');
            } else if (formData.socialConnections === 'few') {
                bioAge += 1.5;
                recommendations.push('Isolement social détecté. Les connexions sociales sont essentielles pour la santé mentale.');
            }

            // Meditation
            if (formData.meditation === 'yes') {
                bioAge -= 1;
            } else {
                recommendations.push('Essayez la méditation ou des exercices de relaxation quotidiens.');
            }

            // Life satisfaction
            if (formData.lifeSatisfaction === 'medium') {
                bioAge += 0.5;
            } else if (formData.lifeSatisfaction === 'low') {
                bioAge += 2;
                recommendations.push('Satisfaction de vie faible. Consultez un psychologue ou coach de vie.');
            }

            // Vegetable servings
            if (formData.vegetableServings === '0-1') {
                bioAge += 2;
                recommendations.push('Consommation de légumes insuffisante. Visez au moins 5 portions par jour.');
            } else if (formData.vegetableServings === '2-3') {
                bioAge += 0.5;
                recommendations.push('Augmentez votre consommation de légumes à 5 portions par jour.');
            } else if (formData.vegetableServings === '6+') {
                bioAge -= 0.5;
            }

            // Processed food
            if (formData.processedFood === 'sometimes') {
                bioAge += 1;
                recommendations.push('Réduisez les aliments transformés. Privilégiez les aliments frais et non transformés.');
            } else if (formData.processedFood === 'often') {
                bioAge += 2.5;
                recommendations.push('Consommation excessive d\'aliments transformés. Cuisinez davantage à la maison.');
            }

            // Water intake
            if (formData.waterIntake === 'insufficient') {
                bioAge += 1.5;
                recommendations.push('Hydratation insuffisante. Buvez au moins 1.5-2L d\'eau par jour.');
            } else if (formData.waterIntake === 'adequate') {
                bioAge += 0;
            } else if (formData.waterIntake === 'excellent') {
                bioAge -= 0.5;
            }

            // Screen time
            const screenTime = parseFloat(formData.screenTime);
            if (screenTime > 6) {
                bioAge += 2;
                recommendations.push('Temps d\'écran excessif. Limitez à 4 heures maximum et faites des pauses régulières.');
            } else if (screenTime > 4) {
                bioAge += 1;
                recommendations.push('Réduisez votre temps d\'écran et faites des pauses toutes les heures.');
            }

            // Round biological age
            bioAge = Math.round(bioAge);

            // Ensure we have at least a few recommendations
            if (recommendations.length === 0) {
                recommendations.push('Excellent ! Continuez vos bonnes habitudes de vie.');
                recommendations.push('Maintenez une activité physique régulière.');
                recommendations.push('Conservez une alimentation équilibrée et variée.');
            } else if (recommendations.length > 8) {
                // Keep only the most important ones
                recommendations.splice(8);
            }

            currentStepNumber = 4;
            document.getElementById('wizardContent').innerHTML = renderStep4(bioAge, recommendations);
            updateProgress();
            window.scrollTo(0, 0);
        }

        // Render current step
        function renderCurrentStep() {
            const container = document.getElementById('wizardContent');
            if (currentStepNumber === 1) {
                container.innerHTML = renderStep1();
            } else if (currentStepNumber === 2) {
                container.innerHTML = renderStep2();
            } else if (currentStepNumber === 3) {
                container.innerHTML = renderStep3();
            }
        }

        // Initialize on page load
        document.addEventListener('DOMContentLoaded', function() {
            checkCookieConsent();
            renderCurrentStep();
            updateProgress();
        });
    </script>
</body>
</html>
